// Hello and God bless! Christ is King! https://github.com/i1li/i
const welcomeOverlay=document.getElementById("welcome-overlay"),welcomeDuration=5e3,frameDuration=100,totalFrames=Math.ceil(welcomeDuration/frameDuration);let currentFrame=0;const easingCurve=new Float32Array(totalFrames);for(let e=0;e<totalFrames;e++){const t=e/totalFrames,o=t===0?0:Math.pow(2,10*t-10);easingCurve[e]=1-o}const intervalId=setInterval(()=>{currentFrame++,currentFrame<=totalFrames&&(welcomeOverlay.style.opacity=easingCurve[currentFrame-1].toFixed(3)),currentFrame>=totalFrames&&(clearInterval(intervalId),welcomeOverlay.style.display="none",welcomeOverlay.style.pointerEvents="none",isInitialLoad=!1)},frameDuration);const F2=.5*(Math.sqrt(3)-1),G2=(3-Math.sqrt(3))/6,grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]];class SimplexNoise{constructor(e=Math.random()){this.p=new Uint8Array(256);for(let t=0;t<256;t++)this.p[t]=Math.floor(e*256),e=(e*9301+49297)%233280/233280;this.perm=new Uint8Array(512);for(let t=0;t<512;t++)this.perm[t]=this.p[t&255]}dot(e,t,n){return e[0]*t+e[1]*n}noise(e,t){e=Math.round(e*1e3)/1e3,t=Math.round(t*1e3)/1e3;let n,s,h,a=(e+t)*F2,l=Math.floor(e+a),r=Math.floor(t+a),i=(l+r)*G2,u=l-i,q=r-i,c=e-u,f=t-q,M,d;c>f?(M=1,d=0):(M=0,d=1);let m=c-M+G2,X=f-d+G2,g=c-1+2*G2,Y=f-1+2*G2,j=l&255,b=r&255,y=this.perm,N=y[j+y[b]]%12,U=y[j+M+y[b+d]]%12,D=y[j+1+y[b+1]]%12,w=.5-c*c-f*f;n=w<0?0:(w*w)**2*this.dot(grad3[N],c,f);let A=.5-m*m-X*X;s=A<0?0:(A*A)**2*this.dot(grad3[U],m,X);let v=.5-g*g-Y*Y;return h=v<0?0:(v*v)**2*this.dot(grad3[D],g,Y),70*(n+s+h)}}const permutation=[...Array(256)].map(()=>Math.floor(Math.random()*256)),p=[...permutation,...permutation];function fade(o){return o*o*o*(o*(o*6-15)+10)}function lerp(o,e,t){return e+o*(t-e)}function grad(o,e){const t=o&15,n=1+(t&7);return(t&8?-n:n)*e}function perlinNoise(o){const e=Math.floor(o)&255;o-=Math.floor(o);const t=fade(o);return lerp(t,grad(p[e],o),grad(p[e+1],o-1))}function fbm(o,e,t,n=4,s=.5,h=2){let a=0,l=1,r=1,i=0;for(let u=0;u<n;u++)a+=l*o.noise(e*r,t*r),i+=l,l*=s,r*=h;return a/i}function turbulence(o,e,t,n=4){let s=0,h=1,a=e,l=t;for(let r=0;r<n;r++)s+=h*Math.abs(o.noise(a,l)),a*=2,l*=2,h*=.5;return s}function worley(o,e,t=4){const n=Math.floor(o*t),s=Math.floor(e*t),h=o*t-n,a=e*t-s;let l=1/0;for(let r=-1;r<=1;r++)for(let i=-1;i<=1;i++){const u=n+r,q=s+i,c=Math.sin(u*73.156+q*94.673)*43758.5453,f=Math.sin(u*45.164+q*94.673)*43758.5453,M=c-Math.floor(c)+r-h,d=f-Math.floor(f)+i-a,m=Math.sqrt(M*M+d*d);m<l&&(l=m)}return Math.min(1,l)}let isWindowActive=!document.hidden,lastUpdateTime=performance.now();const updateWindowStatus=throttle(()=>{const e=isWindowActive;isWindowActive=!document.hidden||document.hasFocus(),isWindowActive&&!e&&(lastUpdateTime=performance.now())},500);window.addEventListener("focus",updateWindowStatus),window.addEventListener("blur",updateWindowStatus),document.addEventListener("visibilitychange",updateWindowStatus);const isMobile=window.matchMedia("(orientation: portrait)").matches||window.innerHeight>window.innerWidth||/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|windows phone|kindle|playbook|silk|mobile|tablet|samsung|lg|htc|nokia|motorola|symbian|fennec|maemo|tizen|blazer|series60|ucbrowser|bada|micromessenger|webview/.test(navigator.userAgent.toLowerCase());function debounce(e,n){let o;return function(...t){clearTimeout(o),o=setTimeout(()=>{e.apply(this,t)},n)}}function throttle(e,n){let o,t;return function(){const a=this,i=arguments;t?(clearTimeout(o),o=setTimeout(function(){Date.now()-t>=n&&(e.apply(a,i),t=Date.now())},Math.max(0,n-(Date.now()-t)))):(e.apply(a,i),t=Date.now())}}const random=(e,n)=>Math.random()*(n-e)+e,easeInOut=e=>e<.5?2*e*e:-1+(4-2*e)*e,easingFunctions=[e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,e=>e<.5?2*e*e:-1+(4-2*e)*e,e=>e<.5?(1-Math.sqrt(1-4*e*e))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,e=>-(Math.cos(Math.PI*e)-1)/2,e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,e=>{const n=2*Math.PI/4.5;return e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((e*2-1.075)*n))/2:Math.pow(2,-20*e+10)*Math.sin((e*2-.075)*n)/2+1}],noiseFunctions=[e=>perlinNoise(e),e=>Math.sin(e*10)*.5+.5,e=>Math.exp(-Math.pow(e-.5,2)/.05),e=>Math.pow(Math.sin(e*Math.PI),3)];function metaRecursiveEaseNoise(e,n=0,o=Math.ceil(Math.random()*300)+33){if(n>=o){const h=easingFunctions[Math.floor(Math.random()*easingFunctions.length)];return h(e)}const t=easingFunctions[Math.floor(Math.random()*easingFunctions.length)],a=noiseFunctions[Math.floor(Math.random()*noiseFunctions.length)],i=Math.random(),s=i/2,r=t(e),c=metaRecursiveNoise(e*i,n+1,o,a)*s;return Math.max(0,Math.min(1,r+c))}function metaRecursiveNoise(e,n=0,o=Math.ceil(Math.random()*300)+33,t){if(n>=o)return t(e);const a=Math.floor(e)&255;e-=Math.floor(e);const i=metaRecursiveEaseNoise(fade(e),n+1,o);return lerp(i,grad(p[a],e),grad(p[a+1],e-1))}const canvas=document.getElementById("canvas");canvas.style.willChange="transform";const ctx=canvas.getContext("2d",{alpha:!0,willReadFrequently:!1,desynchronized:!0}),bufferCanvas=document.createElement("canvas");bufferCanvas.style.willChange="transform";const bufferCtx=bufferCanvas.getContext("2d",{alpha:!0,willReadFrequently:!1,desynchronized:!0});let width,height;function resizeCanvas(){width=canvas.width=bufferCanvas.width=window.innerWidth,height=canvas.height=bufferCanvas.height=window.innerHeight,canvas.style.width=window.innerWidth+"px",canvas.style.height=window.innerHeight+"px"}window.addEventListener("resize",resizeCanvas),resizeCanvas();const shapes=[],SHAPE_COUNT=12,BASE_SIZE=.006,BASE_SIZE_MULTIPLIER=12,BLUR_AMOUNT=3,SHADOW_SCALES=[1.3,1.9,3,4.1];let lastFrameTime=0;const ACCUMULATOR_THRESHOLD=1/60,noise=new SimplexNoise(Math.random()),noiseGenerators=[{name:"simplex",generate:(n,t,o)=>noise.noise(n,t)},{name:"fbm",generate:(n,t,o)=>fbm(noise,n,t,3)},{name:"turbulence",generate:(n,t,o)=>turbulence(noise,n,t,3)},{name:"worley",generate:(n,t,o)=>worley(n,t,4)}];function getNoiseValue(n,t,o,d){try{return n.generate(t,o,d)}catch{return noise.noise(t,o)}}let lastNoiseTime=0;const NOISE_UPDATE_INTERVAL=isMobile?32:16;function createAndChangeShapes(n,t){if(typeof isWindowActive<"u"&&!isWindowActive)return;const o=t*5e-6,d=t-lastNoiseTime>=NOISE_UPDATE_INTERVAL;shapes.forEach(e=>{if(d){const v=o*3,h=e.x,M=e.y,N=(getNoiseValue(e.noiseGeneratorX,h*.0015,o,o)*.15+noise.noise(h*.007,v)*.05)*e.noiseInfluenceX,X=(getNoiseValue(e.noiseGeneratorY,M*.0015,o,o)*.15+noise.noise(M*.007,v)*.05)*e.noiseInfluenceY,S=n*.7;e.vx+=(N-e.vx)*S,e.vy+=(X-e.vy)*S}const u=n*40*e.speedMultiplier;e.x+=e.vx*u,e.y+=e.vy*u,e.rotation+=e.rotationSpeed*n*.6;const a=10;e.x-a<0?(e.x=a,e.vx=Math.abs(e.vx)):e.x+a>width&&(e.x=width-a,e.vx=-Math.abs(e.vx)),e.y-a<0?(e.y=a,e.vy=Math.abs(e.vy)):e.y+a>height&&(e.y=height-a,e.vy=-Math.abs(e.vy));const l=o*.3,f=noise.noise(e.slantNoiseOffsetX+e.x*.002,l)*.5+.5,r=noise.noise(e.slantNoiseOffsetY+e.y*.002,l)*.5+.5,s=noise.noise(e.skewNoiseOffsetX+e.x*.002,l)*.5+.5,i=noise.noise(e.skewNoiseOffsetY+e.y*.002,l)*.5+.5;e.slantX=easeInOut(f),e.slantY=easeInOut(r),e.skewX=easeInOut(s),e.skewY=easeInOut(i);const c=typeof metaRecursiveEaseNoise<"u"?metaRecursiveEaseNoise(Math.sin(o*1.5+e.hueShift)):Math.sin(o*1.5+e.hueShift);e.hue=(e.hue+c*180)%360;const m=.15+.1*Math.sin(o+e.alphaShift),y=noise.noise(e.x*.005,e.y*.005+o)*.05;e.alpha=Math.min(Math.max(.07,m+y),.3),e.scale=.8+noise.noise(e.x*.005,e.y*.005+o*.5)*.7}),d&&(lastNoiseTime=t)}function precomputeShapeColors(n){n.color1=`hsla(${n.hue}, 80%, 60%, 0.6)`,n.color2=`hsla(${(n.hue+140)%360}, 90%, 40%, 0.8)`,n.shadowColors=SHADOW_SCALES.map((t,o)=>`hsla(${(n.hue+o*40)%360}, 70%, 50%, ${.04+o*.02})`)}function drawShapes(n){shapes.forEach(t=>{n.save(),n.translate(t.x,t.y),n.transform(1+t.skewX*1.5,t.slantY*1.5,t.slantX*1.5,1+t.skewY*1.5,0,0),n.rotate(t.rotation),n.scale(t.scale,t.scale);const o=t.vertices,d=t.roundedCorners;let e=1/0,u=1/0,a=-1/0,l=-1/0;for(let r=0;r<o.length;r+=2){const s=o[r],i=o[r+1];s<e&&(e=s),s>a&&(a=s),i<u&&(u=i),i>l&&(l=i)}function f(r){const s=n.createLinearGradient(r?a:e,r?l:u,r?e:a,r?u:l),i=t.color1,c=t.color2;return s.addColorStop(0,r?c:i),s.addColorStop(.15,r?c:i),s.addColorStop(.8,r?i:c),s.addColorStop(1,r?i:c),s}SHADOW_SCALES.forEach((r,s)=>{n.save(),n.scale(r,r),n.beginPath(),n.moveTo(o[0],o[1]);for(let i=0;i<o.length;i+=2){const c=o[i],m=o[i+1],y=o[(i+2)%o.length],w=o[(i+3)%o.length];if(d[i/2]){const g=(c+y)/2,v=(m+w)/2;n.quadraticCurveTo(c,m,g,v)}else n.lineTo(y,w)}n.closePath(),n.fillStyle=t.shadowColors[s],n.fill(),n.restore()}),n.beginPath(),n.moveTo(o[0],o[1]);for(let r=0;r<o.length;r+=2){const s=o[r],i=o[r+1],c=o[(r+2)%o.length],m=o[(r+3)%o.length];if(d[r/2]){const y=(s+c)/2,w=(i+m)/2;n.quadraticCurveTo(s,i,y,w)}else n.lineTo(c,m)}n.closePath(),n.fillStyle=f(SHADOW_SCALES.length%2===0),n.globalAlpha=t.alpha,n.shadowColor=`hsla(${t.hue}, 100%, 80%, 0.3)`,n.shadowBlur=9,n.fill(),n.restore()})}let accumulator=0;function animateShapes(n){const t=(n-lastFrameTime)/1e3||.016;for(lastFrameTime=n,accumulator+=t;accumulator>=ACCUMULATOR_THRESHOLD;)createAndChangeShapes(ACCUMULATOR_THRESHOLD,n),accumulator-=ACCUMULATOR_THRESHOLD;bufferCtx.clearRect(0,0,width,height),drawShapes(bufferCtx),ctx.clearRect(0,0,width,height),ctx.filter=`blur(${BLUR_AMOUNT}px)`,ctx.drawImage(bufferCanvas,0,0),ctx.filter="none",requestAnimationFrame(animateShapes)}for(let n=0;n<SHAPE_COUNT;n++){const t=Math.min(width,height)*random(BASE_SIZE,BASE_SIZE*BASE_SIZE_MULTIPLIER),o=Math.floor(random(33,44)),d=new Float32Array(o*2),e=new Array(o).fill(!1);for(let f=0;f<o;f++){const r=f/o*Math.PI*random(-99,99),s=t*random(.01,6);d[f*2]=Math.cos(r)*s,d[f*2+1]=Math.sin(r)*s,Math.random()<.85&&(e[f]=!0)}const u=noiseGenerators[Math.floor(Math.random()*noiseGenerators.length)],a=noiseGenerators[Math.floor(Math.random()*noiseGenerators.length)],l={vertices:d,roundedCorners:e,hue:random(0,360),alpha:random(.05,.25),x:random(0,width),y:random(0,height),vx:random(-1,1),vy:random(-1,1),speedMultiplier:random(.8,1.2),rotation:random(0,Math.PI*2),rotationSpeed:random(-.33,.33),hueShift:random(0,Math.PI*2),alphaShift:random(0,Math.PI*2),scale:1,slantX:0,slantY:0,skewX:0,skewY:0,slantNoiseOffsetX:random(-1e5,1e5),slantNoiseOffsetY:random(-1e5,1e5),skewNoiseOffsetX:random(-1e5,1e5),skewNoiseOffsetY:random(-1e5,1e5),noiseGeneratorX:u,noiseGeneratorY:a,noiseInfluenceX:typeof metaRecursiveEaseNoise<"u"?metaRecursiveEaseNoise(Math.random()):Math.random(),noiseInfluenceY:typeof metaRecursiveEaseNoise<"u"?metaRecursiveEaseNoise(Math.random()):Math.random()};precomputeShapeColors(l),shapes.push(l)}animateShapes(0);class YTEmbed extends HTMLElement{constructor(){super();const t=this.getAttribute("v"),[e,o]=t.split("?");this.id=e,this.params=o;const s=this.id.split(",");this.videoIds=s;let i,n;switch(this.throttledCheckViewport=this.checkViewport.bind(this),this.throttledCheckViewport=throttle(this.throttledCheckViewport,500),!0){default:this.classList.contains("no-link-embed")?(i=`https://www.youtube.com/watch?v=${this.id}${this.params?"&"+this.params+"&":"&"}autoplay=1`,n=`https://www.youtube-nocookie.com/embed/${this.id}${this.params?"?"+this.params+"&":"?"}autoplay=1`):this.classList.contains("no-embed")?i=`https://www.youtube.com/watch?v=${this.id}${this.params?"&"+this.params+"&":"&"}autoplay=1`:(i=`https://www.youtube-nocookie.com/embed/${this.id}${this.params?"?"+this.params+"&":"?"}autoplay=1`,n=i);break;case this.videoIds.length>1:this.classList.contains("no-link-embed")?(i=`https://www.youtube.com/watch_videos?video_ids=${this.videoIds.join(",")}&autoplay=1`,n=`https://www.youtube-nocookie.com/embed/?playlist=${this.videoIds.join(",")}&autoplay=1`):this.classList.contains("no-embed")?i=`https://www.youtube.com/watch_videos?video_ids=${this.videoIds.join(",")}&autoplay=1`:(i=`https://www.youtube-nocookie.com/embed/?playlist=${this.videoIds.join(",")}&autoplay=1`,n=i);break;case(this.id.length>11&&(this.id.startsWith("PL")||this.id.startsWith("TL")||this.id.startsWith("OL")||this.id.startsWith("FL")||this.id.startsWith("UU"))):this.classList.contains("no-link-embed")?(i=`https://www.youtube.com/playlist?list=${this.id}&autoplay=1`,n=`https://www.youtube-nocookie.com/embed/videoseries?list=${this.id}&autoplay=1`):this.classList.contains("no-embed")?i=`https://www.youtube.com/playlist?list=${this.id}&autoplay=1`:(i=`https://www.youtube-nocookie.com/embed/videoseries?list=${this.id}&autoplay=1`,n=i);break}this.linkUrl=i,this.embedUrl=n,this.link=document.createElement("a"),this.link.textContent=this.getAttribute("t")||"View Video",this.link.title="View video in new tab",this.link.href=this.linkUrl,this.button=document.createElement("button"),this.button.textContent="\u25B6\uFE0F Play",this.button.title="Play Video",this.button.className="showHideButton",this.classList.contains("no-embed")?(this.button.onclick=()=>window.open(this.linkUrl),this.appendChild(this.button),this.appendChild(this.link)):(this.button.onclick=()=>this.toggleVideo(),this.wrapper=document.createElement("div"),this.wrapper.className="yt-wrapper",this.appendChild(this.button),this.appendChild(this.link),this.appendChild(this.wrapper))}toggleVideo(){const t=this.wrapper.querySelector("iframe");if(t)this.wrapper.removeChild(t),this.wrapper.style.display="none",this.button.textContent="\u25B6\uFE0F Play",this.button.title="Play Video",this.removeAttribute("data-now-playing"),this.removeAttribute("data-video-path"),this.removeRemoteControl();else{this.closeOtherVideos();const e=document.createElement("iframe");e.src=this.embedUrl,e.allowFullscreen=!0,e.className="yt",this.wrapper.appendChild(e),this.wrapper.style.display="block",this.button.textContent="\u23F9\uFE0F Stop",this.button.title="Stop Video",this.setAttribute("data-now-playing","true");const o=this.closest("article"),s=this.closest("section");let i="/";o&&(i+=o.id,s&&(i+=`/${s.id}`)),this.setAttribute("data-video-path",i),this.createRemoteControl(),this.setupViewportCheck()}}closeOtherVideos(){document.querySelectorAll("y-t[data-now-playing]").forEach(e=>{if(e!==this){const o=e.querySelector("button.showHideButton");if(o&&o.textContent==="\u23F9\uFE0F Stop"){e.removeAttribute("data-now-playing"),e.removeAttribute("data-video-path");const s=e.querySelector(".yt-wrapper");if(s){const i=s.querySelector("iframe");i&&s.removeChild(i),s.style.display="none"}o.textContent="\u25B6\uFE0F Play",o.title="Play Video"}}})}createRemoteControl(){let t=document.getElementById("remote-control");if(!t){t=document.createElement("div"),t.id="remote-control",t.style.opacity="0",t.style.pointerEvents="none",document.body.appendChild(t);const s=document.createElement("div");s.id="now-playing-text",s.innerHTML="\u{1F50A}Now<br>Playing:",s.style.opacity="0",s.style.pointerEvents="none",document.body.appendChild(s);const i=document.createElement("div");i.id="expand-icon",i.setAttribute("aria-label","Expand Remote Control"),document.body.appendChild(i);const n=()=>{t.style.opacity="0.7",t.style.pointerEvents="auto",i.style.opacity="0",i.style.pointerEvents="none",s.style.opacity="0",s.style.pointerEvents="none"};i.onclick=n,i.onmouseenter=n,t.onmouseleave=()=>{this.isOutOfViewport()&&(t.style.opacity="0",t.style.pointerEvents="none",i.style.opacity="0.2",i.style.pointerEvents="auto",s.style.opacity="0.55",s.style.pointerEvents="auto")}}t.innerHTML="";const e=this.button.cloneNode(!0);e.style="",e.onclick=()=>this.toggleVideo();const o=document.createElement("a");o.textContent="Go to video",o.style.marginTop="10px",o.onclick=s=>{s.preventDefault(),this.navigateToNowPlaying()},this.updateNowPlayingLink(o),t.appendChild(e),t.appendChild(o),this.checkViewport()}checkViewport(){const t=document.getElementById("remote-control"),e=document.getElementById("expand-icon"),o=document.getElementById("now-playing-text");this.isOutOfViewport()?(t&&(t.style.opacity="0",t.style.pointerEvents="none"),e&&(e.style.opacity="0.2",e.style.pointerEvents="auto"),o&&(o.style.opacity="0.55",o.style.pointerEvents="auto")):(t&&(t.style.opacity="0",t.style.pointerEvents="none"),e&&(e.style.opacity="0",e.style.pointerEvents="none"),o&&(o.style.opacity="0",o.style.pointerEvents="none"))}setupViewportCheck(){["scroll","touchmove","resize"].forEach(t=>window.addEventListener(t,this.throttledCheckViewport)),this.checkViewport()}isOutOfViewport(){const t=this.getBoundingClientRect();return t.bottom<=0||t.right<=0||t.left>=window.innerWidth||t.top>=window.innerHeight}updateNowPlayingLink(t){const e=this.getAttribute("data-video-path");e&&(t.href=`${e}#now-playing`)}navigateToNowPlaying(){const t=document.querySelector("y-t[data-now-playing]");if(t){const e=t.getAttribute("data-video-path");e&&(navigate(e.substring(1)),setTimeout(()=>{const o=t.getBoundingClientRect().top+window.pageYOffset-window.innerHeight*.1;window.scrollTo({top:o,behavior:"smooth"})},20))}}removeEventListeners(){["scroll","touchmove","resize"].forEach(t=>window.removeEventListener(t,this.throttledCheckViewport))}removeRemoteControl(){const t=document.getElementById("remote-control");t&&document.body.removeChild(t);const e=document.getElementById("expand-icon");e&&document.body.removeChild(e);const o=document.getElementById("now-playing-text");o&&document.body.removeChild(o),this.removeEventListeners()}}customElements.define("y-t",YTEmbed);function applyDarkMode(e){document.body.classList.toggle("dark-mode",e),document.querySelectorAll("*").forEach(t=>{t.classList.toggle("dark-mode",e)})}function toggleDarkMode(){darkMode=!darkMode,applyDarkMode(darkMode),localStorage.setItem("darkMode",darkMode)}let darkMode;const savedMode=localStorage.getItem("darkMode");savedMode!==null?darkMode=savedMode==="true":window.matchMedia("(prefers-color-scheme: dark)").matches?darkMode=!0:window.matchMedia("(prefers-color-scheme: light)").matches?darkMode=!1:darkMode=!0,applyDarkMode(darkMode);const modeToggle=document.getElementById("dark-light");modeToggle.addEventListener("click",toggleDarkMode);function shuffle(e,t=1/0){if(e.length===1)return e;if(e.length<Math.min(t*2,e.length)){const n=[],l=new Set;for(;l.size<Math.min(t,e.length);){const o=Math.floor(Math.random()*e.length);l.add(o)}for(const o of l)n.push(e[o]);return n}else{for(let n=e.length-1;n>0;n--){const l=Math.floor(Math.random()*(n+1));[e[n],e[l]]=[e[l],e[n]]}return e.slice(0,Math.min(t,e.length))}}const shuffleDiv=document.getElementById("shuffle"),elements=[...shuffleDiv.querySelectorAll("y-t")];let combinedElements=[],elementIdsMap=new Map;function processAndCombine(e,t){if(processedElements.has(t))return;const n=e.getAttribute("v");let l;elementIdsMap.has(t)?l=elementIdsMap.get(t):(l=n.split(","),elementIdsMap.set(t,l)),shuffle(l,3).forEach(s=>combinedElements.push(s.split("?")[0]));const c=shuffle(l,150);if(e.setAttribute("v",c.join(",")),processedElements.add(t),t<elements.length-1)processAndCombine(elements[t+1],t+1);else{const d=document.getElementById("combined-list").querySelector("y-t"),i=[...new Set(combinedElements)],m=shuffle(i,150);d.setAttribute("v",m.join(","))}}let processedElements=new Set;processAndCombine(elements[0],0);function shuffleAndDraw(){shuffle(elements);let e=0,t=document.getElementById("draw");const n=elements[e].cloneNode(!1);processAndCombine(n,e),t.appendChild(n),document.querySelector("#next").addEventListener("click",function(){e=(e+1)%elements.length,t.innerHTML="";const o=elements[e].cloneNode(!1);processAndCombine(o,e),t.appendChild(o)})}shuffleAndDraw();if(!isMobile){let l=function(o){const[n,i]=o.split(" "),[t,s]=i.split(":");return`https://www.blb.org/csb/${n.toLowerCase().substring(0,3)}/${t}/${s}`},d=function(){const o=document.getElementById("header-verse");o.style.display="block",shuffle(r);let n=0,i=0,t=null;const s=500;function h(){const e=r[n];document.querySelectorAll(".bible-verse-text").forEach(a=>{a.textContent=e[1]}),document.querySelectorAll(".bible-verse-link").forEach(a=>{a.textContent=e[0],a.href=l(e[0])});const c=e[1].split(" ").length;i=Math.max(c*650,3300),n=(n+1)%r.length,u()}function u(){t&&clearTimeout(t);function e(){isWindowActive&&!document.querySelector("header").classList.contains("scrolled-down")?(o.style.display="block",i-=s,i<=0?h():t=setTimeout(e,s)):(o.style.display="none",t=setTimeout(e,s))}e()}h()};var constructVerseURL=l,displayRandomBibleVerse=d;document.addEventListener("DOMContentLoaded",function(){isInitialLoad&&d()});const r=[["Philippians 4:7","And the peace of God, which surpasses all understanding, will guard your hearts and minds in Christ Jesus."],["Exodus 3:14","God replied to Moses, 'I AM WHO I AM. This is what you are to say to the Israelites: I AM has sent me to you.'"],["John 6:35","I am the bread of life. Whoever comes to me will never go hungry, and whoever believes in me will never be thirsty."],["John 8:12","I am the light of the world. Whoever follows me will never walk in darkness, but will have the light of life."],["John 10:9","I am the gate; whoever enters through me will be saved."],["John 11:25-26","I am the resurrection and the life. The one who believes in me will live, even though they die; and whoever lives by believing in me will never die."],["John 14:6","I am the way and the truth and the life. No one comes to the Father except through me."],["John 15:1","I am the true vine, and my Father is the gardener."],["John 8:58","Truly, truly, I say to you, before Abraham was, I am."],["Revelation 1:8","I am the Alpha and the Omega, says the Lord God, who is, and who was, and who is to come, the Almighty."],["Proverbs 3:5-6","Trust in the Lord with all your heart, and do not rely on your own understanding; in all your ways know him, and he will make your paths straight."],["2 Corinthians 5:17","Therefore, if anyone is in Christ, he is a new creation; the old has passed away, and see, the new has come!"],["Matthew 6:24","No one can serve two masters, since either he will hate one and love the other, or he will be devoted to one and despise the other. You cannot serve both God and money."],["2 Timothy 1:7","For God has not given us a spirit of fear, but of power and of love and of a sound mind."],["Romans 12:2","Do not be conformed to this age, but be transformed by the renewing of your mind, so that you may discern what is the good, pleasing, and perfect will of God."],["Proverbs 9:8-9","Do not rebuke mockers or they will hate you; rebuke the wise and they will love you. Instruct the wise and they will be wiser still; teach the righteous and they will add to their learning."],["Galatians 2:20","I have been crucified with Christ, and I no longer live, but Christ lives in me. The life I now live in the body, I live by faith in the Son of God, who loved me and gave himself for me."]]}const shiftLayer1=document.getElementById("shift-layer1"),shiftLayer2=document.getElementById("shift-layer2"),bg=document.getElementById("bg"),allShiftLayers=Array.from(document.querySelectorAll('[id^="shift-layer"]')),totalShiftLayers=allShiftLayers.length;function getShiftLayerInfo(r){const t=r.id.match(/shift-layer(\d+)/);return{currentLayer:t?parseInt(t[1]):null,totalLayers:totalShiftLayers}}let shiftLayer1State=createLayerState(shiftLayer1),shiftLayer2State=createLayerState(shiftLayer2),bgState=createBgLayerState(bg);function randomlyModifyValue(r,t=.85,i=1.15){if(Math.random()<.333){const n=Math.random()*(i-t)+t;return Math.round(r*n)}return Math.round(r)}function getRandomInRange(r,t,i=1,n){if(!n.id.startsWith("shift-layer"))return(Math.random()*(t-r)+r)*i;const{currentLayer:o}=getShiftLayerInfo(n);return o!=null?randomlyModifyValue(Math.random()*(t-r)+r)*i:(Math.random()*(t-r)+r)*i}function roundTo(r,t){const i=10**t;return Math.round(r*i)/i}function getRandomTransitionDuration(r){return Math.round(getRandomInRange(7e3,21e3,1,r))}function getRandomHueShift(r){return roundTo(getRandomInRange(-180,180,1,r),1)}function getRandomFilterValue(r){return roundTo(getRandomInRange(87,185,1,r),1)}function getRandomOpacityValue(r){return roundTo(getRandomInRange(65,95,1,r),1)}function getRandomOpacityValue2(r){return roundTo(getRandomInRange(.29,.37,1,r),3)}function getRandomGradientSteps(r){const{currentLayer:t}=getShiftLayerInfo(r);return t===1?7*Math.ceil(Math.random()*7):randomlyModifyValue(Math.ceil(Math.random()*12)+2)}function createLayerState(r){const{currentLayer:t}=getShiftLayerInfo(r);return{transitionCurrentTime:0,transitionProgress:0,transitionDuration:t===1?8e3:5e3,currentGradientSteps:getRandomGradientSteps(r),currentContrast:100,currentBrightness:100,currentSaturation:100,currentOpacity:.75,currentHueShift:0,targetGradientSteps:getRandomGradientSteps(r),targetContrast:getRandomFilterValue(r),targetBrightness:getRandomFilterValue(r),targetSaturation:getRandomFilterValue(r),targetOpacity:getRandomOpacityValue(r),targetHueShift:getRandomHueShift(r)}}function createBgLayerState(r){const t=r.id==="bg"?.33:1;return{transitionCurrentTime:0,transitionProgress:0,transitionDuration:getRandomTransitionDuration(r),currentOpacity:t,targetOpacity:getRandomOpacityValue2(r)}}let lastGradient1="",lastGradient2="";function setGradient(r,t){const{currentLayer:i}=getShiftLayerInfo(r),n=r.offsetWidth||r.clientWidth,o=r.offsetHeight||r.clientHeight,c=Math.sqrt(n**2+o**2)/(Math.max(n,o)*Math.sqrt(2))*100;let h=[];const s=t.currentGradientSteps,d=360/s;for(let u=0;u<s;u++){const g=u*d,f=50+50*Math.cos(g*Math.PI/180),y=50+50*Math.sin(g*Math.PI/180),S=u+s;h.push(`radial-gradient(ellipse farthest-corner at ${roundTo(f,1)}% ${roundTo(y,1)}%, hsl(${S*d}, 100%, 50%), transparent ${roundTo(c,1)}%)`)}const e=h.join(", ");(r.id==="shift-layer1"&&e!==lastGradient1||r.id==="shift-layer2"&&e!==lastGradient2)&&(r.style.backgroundImage=e,r.id==="shift-layer1"?lastGradient1=e:lastGradient2=e),r.style.filter=` opacity(${t.currentOpacity}%) contrast(${t.currentContrast}%) brightness(${t.currentBrightness}%) saturate(${t.currentSaturation}%) hue-rotate(${t.currentHueShift}deg) `.trim()}function updateLayerState(r,t,i){r.transitionCurrentTime+=i,r.transitionProgress=Math.min(1,r.transitionProgress+i/r.transitionDuration);const n=()=>metaRecursiveEaseNoise(r.transitionProgress),{currentLayer:o}=getShiftLayerInfo(t),a=c=>Math.random()*c;o===1?(r.currentGradientSteps+=Math.round((r.targetGradientSteps-r.currentGradientSteps)*n()*5e-5*a(10))/10,r.currentHueShift+=Math.round((r.targetHueShift-r.currentHueShift)*n()*.05*a(10))/10):(r.currentGradientSteps+=Math.round((r.targetGradientSteps-r.currentGradientSteps)*n()*.05*a(10))/10,r.currentHueShift+=Math.round((r.targetHueShift-r.currentHueShift)*n()*.01*a(10))/10),r.currentContrast+=Math.round((r.targetContrast-r.currentContrast)*n()*a(1)*10)/10,r.currentBrightness+=Math.round((r.targetBrightness-r.currentBrightness)*n()*a(1)*10)/10,r.currentSaturation+=Math.round((r.targetSaturation-r.currentSaturation)*n()*a(1)*10)/10,r.currentOpacity+=Math.round((r.targetOpacity-r.currentOpacity)*n()*a(1)*10)/10,r.transitionCurrentTime>=r.transitionDuration&&(r.transitionCurrentTime=0,r.transitionProgress=0,r.transitionDuration=getRandomTransitionDuration(t),r.targetHueShift=getRandomHueShift(t),r.targetGradientSteps=getRandomGradientSteps(t),r.targetContrast=getRandomFilterValue(t),r.targetBrightness=getRandomFilterValue(t),r.targetSaturation=getRandomFilterValue(t),r.targetOpacity=getRandomOpacityValue(t))}function updateBgLayerState(r,t,i){r.transitionCurrentTime+=i,r.transitionProgress=Math.min(1,r.transitionProgress+i/r.transitionDuration*Math.random());const n=()=>metaRecursiveEaseNoise(r.transitionProgress);r.currentOpacity+=Math.round((r.targetOpacity-r.currentOpacity)*n()*Math.random()*1e3)/1e3,r.transitionCurrentTime>=r.transitionDuration&&(r.transitionCurrentTime=0,r.transitionProgress=0,r.transitionDuration=getRandomTransitionDuration(t),r.targetOpacity=t.id==="bg"?getRandomOpacityValue2(t):getRandomOpacityValue(t))}function updateColors(r){if(!isWindowActive){requestAnimationFrame(updateColors);return}const t=r-lastUpdateTime;lastUpdateTime=r,updateLayerState(shiftLayer1State,shiftLayer1,t),updateLayerState(shiftLayer2State,shiftLayer2,t),setGradient(shiftLayer1,shiftLayer1State),setGradient(shiftLayer2,shiftLayer2State),updateBgLayerState(bgState,bg,t),bg.style.opacity=bgState.currentOpacity,requestAnimationFrame(updateColors)}requestAnimationFrame(updateColors);if(window.SPA404Redirect){const e=window.SPA404Redirect.search.slice(1).split("&").map(d=>d.replace(/~and~/g,"&")).join("?"),i=window.SPA404Redirect.origin+window.SPA404Redirect.pathname.slice(0,-1)+e+window.SPA404Redirect.hash;window.history.replaceState(null,null,i),delete window.SPA404Redirect}function pageZoom(o){const n=o?1.05:.95;document.querySelectorAll("html").forEach(function(t){let e=parseFloat(window.getComputedStyle(t).fontSize);e=e*n,t.style.fontSize=e+"px"});const c=parseFloat(window.getComputedStyle(document.documentElement).fontSize);localStorage.setItem("baseFontSize",c)}const savedFontSize=localStorage.getItem("baseFontSize");savedFontSize&&(document.documentElement.style.fontSize=savedFontSize+"px"),document.getElementById("zoom-in").addEventListener("click",function(){pageZoom(!0)}),document.getElementById("zoom-out").addEventListener("click",function(){pageZoom(!1)});const toTop=document.getElementById("toTop"),header=document.querySelector("header"),headerHeight=3*parseFloat(getComputedStyle(document.documentElement).fontSize);function goToTop(){header.classList.remove("scrolled-down"),window.scrollTo(0,0)}function handleScroll(){window.scrollY>headerHeight*.6?header.classList.add("scrolled-down"):header.classList.remove("scrolled-down"),document.body.scrollTop>window.innerHeight||document.documentElement.scrollTop>window.innerHeight?(toTop.style.opacity="0.4",toTop.style.pointerEvents="auto"):(toTop.style.opacity="0",toTop.style.pointerEvents="none")}function updateURLOnScroll(){const t=document.querySelectorAll("article");let o,n;if(t.forEach(e=>{const c=e.getBoundingClientRect();if(c.top<=window.innerHeight/2&&c.bottom>=window.innerHeight/2){o=e;const i=e.querySelectorAll(".section-title");for(let l=i.length-1;l>=0;l--){const s=i[l];if(s.getBoundingClientRect().top<=window.innerHeight/2){n=s;break}}}}),o){let e=o.id;n&&(e+=`/${n.id}`),e!==lastUpdatedPath&&(history.replaceState(null,"",`/${e}`),lastUpdatedPath=e)}}["scroll","touchmove","resize"].forEach(t=>window.addEventListener(t,throttle(()=>{updateURLOnScroll(),handleScroll()},100)));let isInitialLoad=!0,lastUpdatedPath="",path=window.location.pathname.substring(1),hash=window.location.hash.substring(1);const articles=document.querySelectorAll("article"),welcome=document.getElementById("welcome"),observer=new IntersectionObserver(function(t,o){t.forEach(function(e){e.isIntersecting&&(e.target.querySelector(".article-content").style.display="block",o.unobserve(e.target))})});if(articles.forEach(function(t){observer.observe(t),t.querySelector(".article-content").style.display="none"}),path){const[t,o]=path.split("/");t&&document.getElementById(t)?showSingleArticle(t,o):showAllArticles()}else hash?handleHashNavigation(hash):showAllArticles();window.onpopstate=function(t){t.state&&t.state.articleId?showSingleArticle(t.state.articleId,t.state.sectionId):showAllArticles()};function showSingleArticle(t,o){articles.forEach(function(e){if(e.id===t){welcome.style.display="none",e.style.display="block";const i=e.querySelector(".article-content");i&&(i.style.display="block");const s=e.querySelector(".article-nav");if(s){let l=e.querySelector(".article-nav-bottom");l||(l=s.cloneNode(!0),l.classList.add("article-nav-bottom"),e.appendChild(l))}if(o){const l=e.querySelector(`.section-title#${o}`);l&&navigateToElement(l)}else navigateToElement(e);let n=`/${t}`;o&&(n+=`/${o}`),history.replaceState({articleId:t,sectionId:o},"",n)}else e.style.display="none"})}function showAllArticles(){articles.forEach(function(t,o){t.style.display="block",o!==0&&(t.querySelector(".article-content").style.display="none"),observer.observe(t);const e=t.querySelector(".article-nav-bottom");e&&e.remove()}),welcome.style.display="block",goToTop()}function navigateToElement(t){header.classList.add("scrolled-down");let o=t.closest("article");if(isInitialLoad)setTimeout(()=>{o.scrollIntoView({behavior:"instant"});let e=t.getBoundingClientRect().top+window.scrollY-headerHeight;window.scrollTo({top:e,behavior:"instant"})},500);else{o.scrollIntoView({behavior:"smooth"});let e=t.getBoundingClientRect().top+window.scrollY-headerHeight;window.scrollTo({top:e,behavior:"smooth"})}}function navigate(t){if(t.startsWith("#"))handleHashNavigation(t.substring(1));else{const[o,e]=t.split("/");o?showSingleArticle(o,e):(showAllArticles(),history.replaceState({},"",window.location.origin))}}function handleHashNavigation(t){if(t==="now-playing"||!document.getElementById(t))showAllArticles(),history.replaceState(null,"",window.location.pathname);else{const[o,e]=t.split("/");showSingleArticle(o,e)}}function handleLinks(t){const o=t.target.closest("a");if(o){const e=o.getAttribute("href");if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("//")){o.setAttribute("target","_blank"),o.setAttribute("rel","noreferrer");return}t.preventDefault(),navigate(e.substring(1))}}document.addEventListener("click",handleLinks),window.addEventListener("hashchange",()=>{const t=window.location.hash.substring(1);handleHashNavigation(t)});class SimpleToggle extends HTMLElement{constructor(){super(),this.button=document.createElement("button"),this.button.textContent="Show",this.button.className="showHideButton",this.button.onclick=()=>this.toggleContent(),this.content=document.createElement("div"),this.content.style.display="none",this.template=document.createElement("template"),this.template.innerHTML=this.getAttribute("c"),this.append(this.button,this.content)}toggleContent(){this.content.style.display==="none"?(this.content.appendChild(this.template.content.cloneNode(!0)),this.content.style.display="block",this.button.textContent="Hide"):(this.content.innerHTML="",this.content.style.display="none",this.button.textContent="Show")}}customElements.define("s-t",SimpleToggle);function openOverlay(e){var o=document.getElementById("fullScreenOverlay"),n=document.getElementById("overlayImage");o.style.display="block",n.src=e,document.body.style.overflow="hidden",document.addEventListener("keydown",closeOverlay)}function closeOverlay(){var e=document.getElementById("fullScreenOverlay");e.style.display="none",document.body.style.overflow="auto",document.removeEventListener("keydown",closeOverlay)}var images=document.querySelectorAll("img:not(.img-footer,.img-header,.to-top,.no-overlay)");images.forEach(function(e){e.addEventListener("click",function(){openOverlay(this.src)})});const hoverShift=document.querySelectorAll("button, a, .article-nav-bottom, footer"),alwaysShift=document.querySelectorAll("header, #site-title, #toolbar, nav .col a, .article-header, .article-title, .section-nav, footer");function getRandomHueRotation(){return Math.random()<.5?-45-Math.floor(Math.random()*270):45+Math.floor(Math.random()*270)}function getRandomInterval(){return 7e3+Math.floor(Math.random()*14e3)}function isElementInViewport(t){const e=t.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth,r=n*.8;return e.top>=-r&&e.left>=0&&e.bottom<=n+r&&e.right<=o}function startShift(t,e,n=!1){let o=getRandomHueRotation(),r=o,c=100,h=100,u=100,f=100,d=100,m=100,a=0,g=performance.now(),l=!0;function M(){const i=` hue-rotate(${o}deg) saturate(${c}%) contrast(${u}%) brightness(${d}%) ${n?"drop-shadow(0 0 1em rgba(255, 255, 255, 0.5))":""} `.trim();t.style.filter=i}function v(i){if(l){if(isWindowActive&&isElementInViewport(t)){const p=i-g;g=i,a+=p/e,a>=1&&(r=getRandomHueRotation(),h=Math.random()*35+90,f=Math.random()*(n?90:40)+80,m=Math.random()*(n?50:20)+(n?85:90),a=0);const s=()=>metaRecursiveEaseNoise(a);o+=Math.round((r-o)*s()*Math.random()*.07),c+=Math.round((h-c)*s()*Math.random()),u+=Math.round((f-u)*s()*Math.random()),d+=Math.round((m-d)*s()*Math.random()),M()}l&&requestAnimationFrame(v)}}return M(),requestAnimationFrame(v),()=>{l=!1,t.style.filter="none"}}function handleDisengage(t,e){e&&e(),t.style.filter="none"}const observerOptions={threshold:0,rootMargin:"200px"},animationObserver=new IntersectionObserver(t=>{t.forEach(e=>{const n=e.target;e.isIntersecting&&!n._isAnimating&&(n._stopper=startShift(n,getRandomInterval()),n._isAnimating=!0)})},observerOptions);let observeDelay=0;const observeBatchSize=10;alwaysShift.forEach((t,e)=>{setTimeout(()=>{animationObserver.observe(t)},observeDelay),e%observeBatchSize===observeBatchSize-1&&(observeDelay+=20)}),window.addEventListener("beforeunload",()=>{alwaysShift.forEach(t=>{t._stopper&&(t._stopper(),t._stopper=null)}),animationObserver.disconnect()}),isMobile||hoverShift.forEach(t=>{let e=null,n=null;const o=throttle(()=>{e&&e(),e=startShift(t,getRandomInterval(),!0)},30);t.addEventListener("mouseover",o),t.addEventListener("click",o),t.addEventListener("touchstart",()=>{e&&e(),e=startShift(t,getRandomInterval(),!0),n=setTimeout(()=>handleDisengage(t,e),888)}),t.addEventListener("mouseout",debounce(()=>handleDisengage(t,e),30))});function search(){const e=document.getElementById("searchInput").value.toLowerCase(),d=document.querySelectorAll("article"),t=document.getElementById("searchResults");if(t.innerHTML="",e.length===0){t.innerHTML="<p>Enter a search term</p>",t.style.display="block";return}else if(e.length<3){t.style.display="none";return}t.style.display="block";let r=!1;if(d.forEach(function(n){const s=n.textContent.toLowerCase(),c=n.id||"",o=n.querySelector("h1, h2, h3"),u=o?o.textContent:"Untitled Article";if(s.includes(e)){r=!0;const a=s.indexOf(e),i=Math.max(0,a-50),h=Math.min(s.length,a+e.length+50),y=s.substring(i,h).replace(new RegExp(e,"gi"),p=>`<strong>${p}</strong>`),l=document.createElement("div");l.classList.add("search-result");const m=`${c}`;l.innerHTML=` <h3>${c?`<a href="/${m}" class="search-result-link">`:""}${u}${c?"</a>":""}</h3> <p>...${y}...</p> `,t.appendChild(l)}}),t.querySelectorAll(".search-result-link").forEach(n=>{n.addEventListener("click",function(s){closeSearchOverlay()})}),!r){const n=document.createElement("p");n.textContent="No results found.",t.appendChild(n)}}function openSearchOverlay(){document.getElementById("searchOverlay").style.display="block",document.getElementById("searchInput").focus(),document.body.style.overflow="hidden",document.addEventListener("keydown",handleKeyPress),search()}function closeSearchOverlay(){document.getElementById("searchOverlay").style.display="none",document.body.style.overflow="auto",document.removeEventListener("keydown",handleKeyPress),document.getElementById("searchInput").value="",document.getElementById("searchResults").innerHTML=""}function handleKeyPress(e){e.key==="Escape"&&closeSearchOverlay()}document.getElementById("search").addEventListener("click",function(e){e.preventDefault(),openSearchOverlay()}),document.getElementById("searchInput").addEventListener("input",throttle(function(){search()},500));
