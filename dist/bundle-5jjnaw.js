// Hello and God bless! Christ is King! https://github.com/i1li/i
document.body.style.overflow="hidden";const welcomeDuration=3700,delayOtherResources=welcomeDuration-200,delayOtherResources2=welcomeDuration-100,frameDuration=50,totalFrames=Math.ceil(welcomeDuration/frameDuration),scrollbarIntroFrame=Math.floor(totalFrames*.7),easingCurve=new Float32Array(totalFrames);for(let e=0;e<totalFrames;e++){const t=e/totalFrames,o=t===0?0:Math.pow(2,10*t-10);easingCurve[e]=1-o}const welcomeOverlay=document.getElementById("welcome-overlay");let currentFrame=0;const intervalId=setInterval(()=>{currentFrame++,currentFrame<=totalFrames&&(welcomeOverlay.style.opacity=easingCurve[currentFrame-1].toFixed(3)),currentFrame>=scrollbarIntroFrame&&(document.body.style.overflow="auto"),currentFrame>=totalFrames&&(clearInterval(intervalId),welcomeOverlay.style.display="none")},frameDuration);const isMobile=window.matchMedia("(orientation: portrait)").matches||window.innerHeight>window.innerWidth||/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|windows phone|kindle|playbook|silk|mobile|tablet|samsung|lg|htc|nokia|motorola|symbian|fennec|maemo|tizen|blazer|series60|ucbrowser|bada|micromessenger|webview/.test(navigator.userAgent.toLowerCase());function debounce(e,o){let t;return function(...n){clearTimeout(t),t=setTimeout(()=>{e.apply(this,n)},o)}}function throttle(e,o){let t,n;return function(){const s=this,l=arguments;n?(clearTimeout(t),t=setTimeout(function(){Date.now()-n>=o&&(e.apply(s,l),n=Date.now())},Math.max(0,o-(Date.now()-n)))):(e.apply(s,l),n=Date.now())}}let isWindowActive=!document.hidden,lastUpdateTime=performance.now();const sharedWindowStatusHandler=throttle(()=>{const e=isWindowActive;isWindowActive=!document.hidden||document.hasFocus(),isWindowActive&&!e&&(lastUpdateTime=performance.now())},500);window.addEventListener("focus",sharedWindowStatusHandler),window.addEventListener("blur",sharedWindowStatusHandler),document.addEventListener("visibilitychange",sharedWindowStatusHandler);function shuffle(e,o=1/0){if(e.length===1)return e;if(e.length<Math.min(o*2,e.length)){const t=[],n=new Set;for(;n.size<Math.min(o,e.length);){const s=Math.floor(Math.random()*e.length);n.add(s)}for(const s of n)t.push(e[s]);return t}else{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e.slice(0,Math.min(o,e.length))}}let imgOverlay=document.getElementById("fullScreenOverlay");function openImageOverlay(e){let o=document.getElementById("overlayImage");imgOverlay.style.display="block",o.src=e,document.body.style.overflow="hidden",document.addEventListener("keydown",closeImageOverlay)}function closeImageOverlay(){imgOverlay.style.display="none",document.body.style.overflow="auto",document.removeEventListener("keydown",closeImageOverlay)}document.addEventListener("DOMContentLoaded",function(){const e=localStorage.getItem("baseFontSize");e&&(document.documentElement.style.fontSize=e+"px")});function pageZoom(e){const o=e?1.05:.95;document.querySelectorAll("html").forEach(function(s){let l=parseFloat(window.getComputedStyle(s).fontSize);l=l*o,s.style.fontSize=l+"px"});const n=parseFloat(window.getComputedStyle(document.documentElement).fontSize);localStorage.setItem("baseFontSize",n)}function applyDarkMode(e){document.body.classList.toggle("dark-mode",e),document.querySelectorAll("*").forEach(o=>{o.classList.toggle("dark-mode",e)})}let darkMode;function toggleDarkMode(){darkMode=!darkMode,applyDarkMode(darkMode),localStorage.setItem("darkMode",darkMode)}document.addEventListener("DOMContentLoaded",function(){const e=localStorage.getItem("darkMode");e!==null?darkMode=e==="true":window.matchMedia("(prefers-color-scheme: dark)").matches?darkMode=!0:window.matchMedia("(prefers-color-scheme: light)").matches?darkMode=!1:darkMode=!0,applyDarkMode(darkMode)});class SimpleToggle extends HTMLElement{constructor(){super(),this.button=document.createElement("button"),this.button.textContent="\u25B6\uFE0F Play",this.button.title="Play Content",this.button.className="showHideButton",this.button.onclick=()=>this.toggleContent(),this.content=document.createElement("div"),this.content.style.display="none",this.template=document.createElement("template"),this.template.innerHTML=this.getAttribute("c"),this.append(this.button,this.content)}toggleContent(){this.content.style.display==="none"?(this.content.appendChild(this.template.content.cloneNode(!0)),this.content.style.display="block",this.button.textContent="\u23F9\uFE0F Stop",this.button.title="Stop Content"):(this.content.innerHTML="",this.content.style.display="none",this.button.textContent="\u25B6\uFE0F Play",this.button.title="Play Content")}}customElements.define("s-t",SimpleToggle);const searchInput=document.getElementById("searchInput"),searchResults=document.getElementById("searchResults"),searchOverlay=document.getElementById("searchOverlay");function searchSPA(){const e=searchInput.value.toLowerCase().trim();if(searchResults.innerHTML="",!e){searchResults.innerHTML="<p>Enter a search term</p>",searchResults.style.display="block";return}if(e.length<3){searchResults.style.display="none";return}searchResults.style.display="block";let o=!1;document.querySelectorAll("article").forEach(t=>{const n=t.cloneNode(!0);n.querySelectorAll("button").forEach(i=>i.remove()),n.querySelectorAll("nav").forEach(i=>i.remove());const s=n.textContent.toLowerCase();if(!s.includes(e))return;o=!0;const l=t.querySelector("h1,h2,h3")?.textContent||"Untitled Article",c=t.id||"",a=s.indexOf(e),d=s.slice(Math.max(0,a-50),a+e.length+50).replace(new RegExp(e,"gi"),i=>`<strong>${i}</strong>`);searchResults.insertAdjacentHTML("beforeend",` <div class="search-result"> <h3>${c?`<a href="/${c}" class="search-result-link">`:""}${l}${c?"</a>":""}</h3> <p>...${d}...</p> </div> `)}),searchResults.querySelectorAll(".search-result-link").forEach(t=>t.addEventListener("click",closeSearchOverlay)),o||(searchResults.innerHTML="<p>No results found.</p>")}let sharedSearchHandler;function openSearchOverlay(){searchOverlay.style.display="block",document.body.style.overflow="hidden",searchInput.focus(),searchResults.innerHTML="<p>Enter a search term</p>",searchResults.style.display="block",sharedSearchHandler=throttle(e=>{e.type==="keydown"&&e.key==="Escape"?closeSearchOverlay():e.type==="input"&&searchSPA()},500),document.addEventListener("keydown",sharedSearchHandler),searchInput.addEventListener("input",sharedSearchHandler)}function closeSearchOverlay(){searchOverlay.style.display="none",document.body.style.overflow="auto",searchInput.value="",searchResults.innerHTML="",document.removeEventListener("keydown",sharedSearchHandler),searchInput.removeEventListener("input",sharedSearchHandler),sharedSearchHandler=null}const random=(t,o)=>Math.random()*(o-t)+t,easeInOut=t=>t<.5?2*t*t:-1+(4-2*t)*t,easingFunctions=[t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,t=>t<.5?2*t*t:-1+(4-2*t)*t,t=>t<.5?(1-Math.sqrt(1-4*t*t))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,t=>-(Math.cos(Math.PI*t)-1)/2,t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,t=>{const o=2*Math.PI/4.5;return t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((t*2-1.075)*o))/2:Math.pow(2,-20*t+10)*Math.sin((t*2-.075)*o)/2+1}],noiseFunctions=[t=>perlinNoise(t),t=>Math.sin(t*10)*.5+.5,t=>Math.exp(-Math.pow(t-.5,2)/.05),t=>Math.pow(Math.sin(t*Math.PI),3)];function metaRecursiveEaseNoise(t,o=0,n=Math.ceil(Math.random()*300)+33){if(o>=n){const i=easingFunctions[Math.floor(Math.random()*easingFunctions.length)];return i(t)}const e=easingFunctions[Math.floor(Math.random()*easingFunctions.length)],s=noiseFunctions[Math.floor(Math.random()*noiseFunctions.length)],l=Math.random(),h=l/random(1.5,2.5),r=e(t),a=metaRecursiveNoise(t*l,o+1,n,s)*h;return Math.max(0,Math.min(1,r+a))}function fade(t){return t*t*t*(t*(t*6-15)+10)}function lerp(t,o,n){return o+t*(n-o)}function grad(t,o){const n=t&15,e=1+(n&7);return(n&8?-e:e)*o}function metaRecursiveNoise(t,o=0,n=random(33,111),e){if(o>=n)return e(t);const s=Math.floor(t)&255;t-=Math.floor(t);const l=metaRecursiveEaseNoise(fade(t),o+1,n);return lerp(l,grad(p[s],t),grad(p[s+1],t-1))}const F2=.5*(Math.sqrt(3)-1),G2=(3-Math.sqrt(3))/6,grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]];class SimplexNoise{constructor(o=Math.random()){this.p=new Uint8Array(256);for(let n=0;n<256;n++)this.p[n]=Math.floor(o*256),o=(o*9301+49297)%233280/233280;this.perm=new Uint8Array(512);for(let n=0;n<512;n++)this.perm[n]=this.p[n&255]}dot(o,n,e){return o[0]*n+o[1]*e}noise(o,n){o=Math.round(o*1e3)/1e3,n=Math.round(n*1e3)/1e3;let e,s,l,h=(o+n)*F2,r=Math.floor(o+h),a=Math.floor(n+h),i=(r+a)*G2,f=r-i,g=a-i,c=o-f,M=n-g,u,m;c>M?(u=1,m=0):(u=0,m=1);let d=c-u+G2,q=M-m+G2,y=c-1+2*G2,X=M-1+2*G2,I=r&255,N=a&255,w=this.perm,A=w[I+w[N]]%12,b=w[I+u+w[N+m]]%12,E=w[I+1+w[N+1]]%12,Y=.5-c*c-M*M;e=Y<0?0:(Y*Y)**2*this.dot(grad3[A],c,M);let j=.5-d*d-q*q;s=j<0?0:(j*j)**2*this.dot(grad3[b],d,q);let v=.5-y*y-X*X;return l=v<0?0:(v*v)**2*this.dot(grad3[E],y,X),70*(e+s+l)}}const permutation=[...Array(256)].map(()=>Math.floor(Math.random()*256)),p=[...permutation,...permutation];function perlinNoise(t){const o=Math.floor(t)&255;t-=Math.floor(t);const n=fade(t);return lerp(n,grad(p[o],t),grad(p[o+1],t-1))}function fbm(t,o,n,e=4,s=.5,l=2){let h=0,r=1,a=1,i=0;for(let f=0;f<e;f++)h+=r*t.noise(o*a,n*a),i+=r,r*=s,a*=l;return h/i}function turbulence(t,o,n,e=4){let s=0,l=1,h=o,r=n;for(let a=0;a<e;a++)s+=l*Math.abs(t.noise(h,r)),h*=2,r*=2,l*=.5;return s}function worley(t,o,n=4){const e=Math.floor(t*n),s=Math.floor(o*n),l=t*n-e,h=o*n-s;let r=1/0;for(let a=-1;a<=1;a++)for(let i=-1;i<=1;i++){const f=e+a,g=s+i,c=Math.sin(f*73.156+g*94.673)*43758.5453,M=Math.sin(f*45.164+g*94.673)*43758.5453,u=c-Math.floor(c)+a-l,m=M-Math.floor(M)+i-h,d=Math.sqrt(u*u+m*m);d<r&&(r=d)}return Math.min(1,r)}const canvas=document.getElementById("canvas");canvas.style.willChange="transform";const ctx=canvas.getContext("2d",{alpha:!0,willReadFrequently:!1,desynchronized:!0}),bufferCanvas=document.createElement("canvas");bufferCanvas.style.willChange="transform";const bufferCtx=bufferCanvas.getContext("2d",{alpha:!0,willReadFrequently:!1,desynchronized:!0});let width,height;function resizeCanvas(){width=canvas.width=bufferCanvas.width=window.innerWidth,height=canvas.height=bufferCanvas.height=window.innerHeight,canvas.style.width=window.innerWidth+"px",canvas.style.height=window.innerHeight+"px"}window.addEventListener("resize",resizeCanvas),resizeCanvas();const shapes=[],SHAPE_COUNT=12,BASE_SIZE=.006,BASE_SIZE_MULTIPLIER=12,BLUR_AMOUNT=3,SHADOW_SCALES=[1.3,1.9,3,4.1];let lastFrameTime=0;const ACCUMULATOR_THRESHOLD=1/60,noise=new SimplexNoise(Math.random()),noiseGenerators=[{name:"simplex",generate:(n,t,o)=>noise.noise(n,t)},{name:"fbm",generate:(n,t,o)=>fbm(noise,n,t,3)},{name:"turbulence",generate:(n,t,o)=>turbulence(noise,n,t,3)},{name:"worley",generate:(n,t,o)=>worley(n,t,4)}];function getNoiseValue(n,t,o,d){try{return n.generate(t,o,d)}catch{return noise.noise(t,o)}}let lastNoiseTime=0;const NOISE_UPDATE_INTERVAL=isMobile?32:16;function createAndChangeShapes(n,t){if(typeof isWindowActive<"u"&&!isWindowActive)return;const o=t*5e-6,d=t-lastNoiseTime>=NOISE_UPDATE_INTERVAL;shapes.forEach(e=>{if(d){const v=o*3,h=e.x,M=e.y,S=(getNoiseValue(e.noiseGeneratorX,h*.0015,o,o)*.15+noise.noise(h*.007,v)*.05)*e.noiseInfluenceX,X=(getNoiseValue(e.noiseGeneratorY,M*.0015,o,o)*.15+noise.noise(M*.007,v)*.05)*e.noiseInfluenceY,N=n*.7;e.vx+=(S-e.vx)*N,e.vy+=(X-e.vy)*N}const u=n*40*e.speedMultiplier;e.x+=e.vx*u,e.y+=e.vy*u,e.rotation+=e.rotationSpeed*n*.6;const a=10;e.x-a<0?(e.x=a,e.vx=Math.abs(e.vx)):e.x+a>width&&(e.x=width-a,e.vx=-Math.abs(e.vx)),e.y-a<0?(e.y=a,e.vy=Math.abs(e.vy)):e.y+a>height&&(e.y=height-a,e.vy=-Math.abs(e.vy));const l=o*.3,f=noise.noise(e.slantNoiseOffsetX+e.x*.002,l)*.5+.5,r=noise.noise(e.slantNoiseOffsetY+e.y*.002,l)*.5+.5,s=noise.noise(e.skewNoiseOffsetX+e.x*.002,l)*.5+.5,i=noise.noise(e.skewNoiseOffsetY+e.y*.002,l)*.5+.5;e.slantX=easeInOut(f),e.slantY=easeInOut(r),e.skewX=easeInOut(s),e.skewY=easeInOut(i);const c=typeof metaRecursiveEaseNoise<"u"?metaRecursiveEaseNoise(Math.sin(o*1.5+e.hueShift)):Math.sin(o*1.5+e.hueShift);e.hue=(e.hue+c*180)%360;const m=.15+.1*Math.sin(o+e.alphaShift),y=noise.noise(e.x*.005,e.y*.005+o)*.05;e.alpha=Math.min(Math.max(.07,m+y),.3),e.scale=.8+noise.noise(e.x*.005,e.y*.005+o*.5)*.7}),d&&(lastNoiseTime=t)}function precomputeShapeColors(n){n.color1=`hsla(${n.hue}, 80%, 60%, 0.6)`,n.color2=`hsla(${(n.hue+140)%360}, 90%, 40%, 0.8)`,n.shadowColors=SHADOW_SCALES.map((t,o)=>`hsla(${(n.hue+o*40)%360}, 70%, 50%, ${.04+o*.02})`)}function drawShapes(n){shapes.forEach(t=>{n.save(),n.translate(t.x,t.y),n.transform(1+t.skewX*1.5,t.slantY*1.5,t.slantX*1.5,1+t.skewY*1.5,0,0),n.rotate(t.rotation),n.scale(t.scale,t.scale);const o=t.vertices,d=t.roundedCorners;let e=1/0,u=1/0,a=-1/0,l=-1/0;for(let r=0;r<o.length;r+=2){const s=o[r],i=o[r+1];s<e&&(e=s),s>a&&(a=s),i<u&&(u=i),i>l&&(l=i)}function f(r){const s=n.createLinearGradient(r?a:e,r?l:u,r?e:a,r?u:l),i=t.color1,c=t.color2;return s.addColorStop(0,r?c:i),s.addColorStop(.15,r?c:i),s.addColorStop(.8,r?i:c),s.addColorStop(1,r?i:c),s}SHADOW_SCALES.forEach((r,s)=>{n.save(),n.scale(r,r),n.beginPath(),n.moveTo(o[0],o[1]);for(let i=0;i<o.length;i+=2){const c=o[i],m=o[i+1],y=o[(i+2)%o.length],w=o[(i+3)%o.length];if(d[i/2]){const g=(c+y)/2,v=(m+w)/2;n.quadraticCurveTo(c,m,g,v)}else n.lineTo(y,w)}n.closePath(),n.fillStyle=t.shadowColors[s],n.fill(),n.restore()}),n.beginPath(),n.moveTo(o[0],o[1]);for(let r=0;r<o.length;r+=2){const s=o[r],i=o[r+1],c=o[(r+2)%o.length],m=o[(r+3)%o.length];if(d[r/2]){const y=(s+c)/2,w=(i+m)/2;n.quadraticCurveTo(s,i,y,w)}else n.lineTo(c,m)}n.closePath(),n.fillStyle=f(SHADOW_SCALES.length%2===0),n.globalAlpha=t.alpha,n.shadowColor=`hsla(${t.hue}, 100%, 80%, 0.3)`,n.shadowBlur=9,n.fill(),n.restore()})}let accumulator=0;function animateShapes(n){const t=(n-lastFrameTime)/1e3||.016;for(lastFrameTime=n,accumulator+=t;accumulator>=ACCUMULATOR_THRESHOLD;)createAndChangeShapes(ACCUMULATOR_THRESHOLD,n),accumulator-=ACCUMULATOR_THRESHOLD;bufferCtx.clearRect(0,0,width,height),drawShapes(bufferCtx),ctx.clearRect(0,0,width,height),ctx.filter=`blur(${BLUR_AMOUNT}px)`,ctx.drawImage(bufferCanvas,0,0),ctx.filter="none",requestAnimationFrame(animateShapes)}for(let n=0;n<SHAPE_COUNT;n++){const t=Math.min(width,height)*random(BASE_SIZE,BASE_SIZE*BASE_SIZE_MULTIPLIER),o=Math.floor(random(33,44)),d=new Float32Array(o*2),e=new Array(o).fill(!1);for(let f=0;f<o;f++){const r=f/o*Math.PI*random(-99,99),s=t*random(.01,6);d[f*2]=Math.cos(r)*s,d[f*2+1]=Math.sin(r)*s,Math.random()<.85&&(e[f]=!0)}const u=noiseGenerators[Math.floor(Math.random()*noiseGenerators.length)],a=noiseGenerators[Math.floor(Math.random()*noiseGenerators.length)],l={vertices:d,roundedCorners:e,hue:random(0,360),alpha:random(.05,.25),x:random(0,width),y:random(0,height),vx:random(-1,1),vy:random(-1,1),speedMultiplier:random(.8,1.2),rotation:random(0,Math.PI*2),rotationSpeed:random(-.33,.33),hueShift:random(0,Math.PI*2),alphaShift:random(0,Math.PI*2),scale:1,slantX:0,slantY:0,skewX:0,skewY:0,slantNoiseOffsetX:random(-1e5,1e5),slantNoiseOffsetY:random(-1e5,1e5),skewNoiseOffsetX:random(-1e5,1e5),skewNoiseOffsetY:random(-1e5,1e5),noiseGeneratorX:u,noiseGeneratorY:a,noiseInfluenceX:typeof metaRecursiveEaseNoise<"u"?metaRecursiveEaseNoise(Math.random()):Math.random(),noiseInfluenceY:typeof metaRecursiveEaseNoise<"u"?metaRecursiveEaseNoise(Math.random()):Math.random()};precomputeShapeColors(l),shapes.push(l)}animateShapes(0);class YTEmbed extends HTMLElement{static get observedAttributes(){return["v"]}constructor(){super(),this.throttledCheckViewport=this.checkViewport.bind(this),this.throttledCheckViewport=throttle(this.throttledCheckViewport,500),this.link=document.createElement("a"),this.link.title="View video in new tab",this.link.target="_blank",this.link.rel="noreferrer",this.button=document.createElement("button"),this.button.title="Play Video",this.button.className="showHideButton",this.initFromV()}attributeChangedCallback(t,e,i){t==="v"&&e!==i&&this.initFromV()}initFromV(){const t=this.getAttribute("v");if(!t)return;const e=t.split(",");this.rawIds=e;const{id:i,params:o,videoIds:n,playlistIds:a}=(()=>{const c=this.rawIds.map(s=>s.split("?")).map(([s,y])=>({id:s,params:y})),u=c.filter(s=>s.id.length===11).map(s=>s.id),p=c.filter(s=>s.id.length>11).map(s=>s.id),m=p[0]?c.find(s=>s.id===p[0]):c.find(s=>s.id.length===11)||c[0];return{id:m.id,params:m.params,videoIds:u,playlistIds:p}})();Object.assign(this,{id:i,params:o,videoIds:n,playlistIds:a});let r,d;const h="https://embed-proxy.github.io/";if(this.classList.contains("no-embed"))switch(!0){default:r=`https://www.youtube.com/watch?v=${this.id}${this.params?"&"+this.params+"&":"&"}autoplay=1`,d=null;break;case this.videoIds.length>1:r=`https://www.youtube.com/watch_videos?video_ids=${this.videoIds.join(",")}&autoplay=1`,d=null;break;case this.playlistIds.length>0:r=`https://www.youtube.com/playlist?list=${this.id}&autoplay=1`,d=null;break}else switch(!0){default:d=`https://www.youtube-nocookie.com/embed/${this.id}${this.params?"?"+this.params+"&":"?"}autoplay=1`,r=h+d;break;case this.videoIds.length>1:d=`https://www.youtube-nocookie.com/embed/?playlist=${this.videoIds.join(",")}&autoplay=1`,r=h+d;break;case this.playlistIds.length>0:d=`https://www.youtube-nocookie.com/embed/videoseries?list=${this.id}&autoplay=1`,r=h+d;break}this.linkUrl=r,this.embedUrl=d,this.link.href=this.linkUrl,this.link.textContent=this.getAttribute("t")||"View Video",this.button.textContent="\u25B6\uFE0F Play",this.classList.contains("no-embed")?(this.button.onclick=()=>window.open(this.linkUrl),this.appendChild(this.button),this.appendChild(this.link)):(this.button.onclick=()=>this.toggleVideo(),this.wrapper=document.createElement("div"),this.wrapper.className="yt-wrapper",this.appendChild(this.button),this.appendChild(this.link),this.appendChild(this.wrapper))}toggleVideo(){const t=this.wrapper.querySelector("iframe");if(t)this.wrapper.removeChild(t),this.wrapper.style.display="none",this.button.textContent="\u25B6\uFE0F Play",this.button.title="Play Video",this.removeAttribute("data-now-playing"),this.removeAttribute("data-video-path"),this.removeRemoteControl();else{this.closeOtherVideos();const e=document.createElement("iframe");e.src=this.embedUrl,e.allowFullscreen=!0,e.className="yt",this.wrapper.appendChild(e),this.wrapper.style.display="block",this.button.textContent="\u23F9\uFE0F Stop",this.button.title="Stop Video",this.setAttribute("data-now-playing","true");const i=this.closest("article"),o=this.closest("section");let n="/";i&&(n+=i.id,o&&(n+=`/${o.id}`)),this.setAttribute("data-video-path",n),this.createRemoteControl(),this.setupViewportCheck()}}closeOtherVideos(){document.querySelectorAll("y-t[data-now-playing]").forEach(t=>{t!==this&&t.button.click()})}createRemoteControl(){let t=document.getElementById("remote-control");if(!t){t=document.createElement("div"),t.id="remote-control",t.style.display="none",document.body.appendChild(t);const o=document.createElement("div");o.id="now-playing-text",o.innerHTML="\u{1F50A}Now<br>Playing:",o.style.display="none",document.body.appendChild(o);const n=document.createElement("div");n.id="expand-icon",n.setAttribute("aria-label","Expand Remote Control"),n.style.display="block",document.body.appendChild(n);const a=()=>{t.style.display="block",n.style.display="none",o.style.display="none"};n.onclick=a,n.onmouseenter=a,t.onmouseleave=()=>{this.isOutOfViewport()&&(t.style.display="none",n.style.display="block",o.style.display="block")}}t.innerHTML="";const e=this.button.cloneNode(!0);e.style="",e.style.display="block",e.onclick=()=>this.toggleVideo();const i=document.createElement("a");i.textContent="Go to video",i.style.display="block",i.onclick=o=>{o.preventDefault(),this.navigateToNowPlaying()},this.updateNowPlayingLink(i),t.appendChild(e),t.appendChild(i),this.checkViewport()}checkViewport(){const t=document.getElementById("remote-control"),e=document.getElementById("expand-icon"),i=document.getElementById("now-playing-text");this.isOutOfViewport()?(t&&(t.style.display="none"),e&&(e.style.display="block"),i&&(i.style.display="block")):(t&&(t.style.display="none"),e&&(e.style.display="none"),i&&(i.style.display="none"))}setupViewportCheck(){["scroll","touchmove","resize"].forEach(t=>window.addEventListener(t,this.throttledCheckViewport)),this.checkViewport()}isOutOfViewport(){const t=this.getBoundingClientRect();return t.bottom<=0||t.right<=0||t.left>=window.innerWidth||t.top>=window.innerHeight}updateNowPlayingLink(t){const e=this.getAttribute("data-video-path");e&&(t.href=`${e}#now-playing`)}navigateToNowPlaying(){const t=document.querySelector("y-t[data-now-playing]");if(t){const e=t.getAttribute("data-video-path");e&&(navigateSPA(e.substring(1)),setTimeout(()=>{const i=t.getBoundingClientRect().top+window.pageYOffset-window.innerHeight*.1;window.scrollTo({top:i,behavior:"smooth"})},20))}}removeEventListeners(){["scroll","touchmove","resize"].forEach(t=>window.removeEventListener(t,this.throttledCheckViewport))}removeRemoteControl(){const t=document.getElementById("remote-control");t&&document.body.removeChild(t);const e=document.getElementById("expand-icon");e&&document.body.removeChild(e);const i=document.getElementById("now-playing-text");i&&document.body.removeChild(i),this.removeEventListeners()}}customElements.define("y-t",YTEmbed);const shuffleDiv=document.getElementById("shuffle"),embeddableYT=[...shuffleDiv.querySelectorAll("y-t:not(#no-embed y-t)")],noEmbedSpan=document.getElementById("no-embed"),noEmbedYT=noEmbedSpan.querySelector("y-t");let allNonEmbedIds=[];embeddableYT.forEach(l=>{const t=l.getAttribute("u");t&&allNonEmbedIds.push(...t.split(",").map(e=>e.trim()))}),noEmbedYT.setAttribute("v",shuffle([...new Set(allNonEmbedIds)],150).join(","));let combinedElements=[],elementIdsMap=new Map;function processAndCombine(l,t){if(processedElements.has(t))return;const e=l.getAttribute("v");let i=elementIdsMap.get(t)||e.split(",");elementIdsMap.has(t)||elementIdsMap.set(t,i),shuffle(i,3).forEach(a=>combinedElements.push(a.split("?")[0]));const n=shuffle(i,150);if(l.setAttribute("v",n.join(",")),processedElements.add(t),t<embeddableYT.length-1)processAndCombine(embeddableYT[t+1],t+1);else{const a=document.getElementById("combined-list");(a.querySelector("y-t")??a.appendChild(document.createElement("y-t"))).setAttribute("v",shuffle([...new Set(combinedElements)],150).join(","))}}let processedElements=new Set;processAndCombine(embeddableYT[0],0);function shuffleAndDraw(){shuffle(embeddableYT);let l=0,t=document.getElementById("deck");const e=embeddableYT[l].cloneNode(!1);processAndCombine(e,l),t.appendChild(e),document.querySelector("#next").addEventListener("click",function(){l=(l+1)%embeddableYT.length,t.innerHTML="";const o=embeddableYT[l].cloneNode(!1);processAndCombine(o,l),t.appendChild(o)})}shuffleAndDraw();if(!isMobile){let l=function(){const e=document.getElementById("header-verse");e.style.display="block",shuffle(h);let o=0,n=0,a=null;const r=500;function s(){const t=h[o];document.querySelectorAll(".bible-verse-text").forEach(i=>{i.textContent=t[1]}),document.querySelectorAll(".bible-verse-link").forEach(i=>{i.textContent=t[0],i.href=u(t[0])});const y=t[1].split(" ").length;n=Math.max(y*650,3300),o=(o+1)%h.length,d()}function d(){a&&clearTimeout(a);function t(){isWindowActive&&!document.querySelector("header").classList.contains("scrolled-down")?(e.style.display="block",n-=r,n<=0?s():a=setTimeout(t,r)):(e.style.display="none",a=setTimeout(t,r))}t()}s()};var displayRandomBibleVerse=l;const u=e=>{const o=e.lastIndexOf(" "),n=o>-1?e.slice(0,o).trim():e.trim(),a=o>-1?e.slice(o+1):"",[r,s]=a.split(":");return`https://blb.org/csb/${n.replace(/\s+/g,"").toLowerCase().substring(0,3)}/${r}/${s}`};document.addEventListener("DOMContentLoaded",function(){l()});const h=[["Psalm 119:105","Your word is a lamp for my feet and a light on my path."],["Romans 8:38-39","For I am persuaded that neither death nor life, nor angels nor rulers, nor things present nor things to come, nor powers, nor height nor depth, nor any other created thing will be able to separate us from the love of God that is in Christ Jesus our Lord."],["Ephesians 6:10-11","Finally, be strengthened by the Lord and by his vast strength. Put on the full armor of God so that you can stand against the schemes of the devil."],["Matthew 5:14-16","You are the light of the world. A city situated on a hill cannot be hidden. No one lights a lamp and puts it under a basket, but rather on a lampstand, and it gives light for all who are in the house. In the same way, let your light shine before others, so that they may see your good works and give glory to your Father in heaven."],["1 John 4:8","The one who does not love does not know God, because God is love."],["Psalm 37:4","Take delight in the Lord, and he will give you your heart's desires."],["Colossians 3:23","Whatever you do, do it from the heart, as something done for the Lord and not for people."],["Isaiah 40:31","but those who trust in the Lord will renew their strength; they will soar on wings like eagles; they will run and not become weary, they will walk and not faint."],["Matthew 22:37-39","He said to him, 'Love the Lord your God with all your heart, with all your soul, and with all your mind. This is the greatest and most important command. The second is like it: Love your neighbor as yourself.'"],["Psalm 23:4","Even when I go through the darkest valley, I fear no danger, for you are with me; your rod and your staff\u2014they comfort me."],["1 Corinthians 13:4-7","Love is patient, love is kind. Love does not envy, is not boastful, is not arrogant, is not rude, is not self-seeking, is not irritable, and does not keep a record of wrongs. Love finds no joy in unrighteousness but rejoices in the truth. It bears all things, believes all things, hopes all things, endures all things."],["James 1:2-4","Consider it a great joy, my brothers and sisters, whenever you experience various trials, because you know that the testing of your faith produces endurance. And let endurance have its full effect, so that you may be mature and complete, lacking nothing."],["Psalm 46:1","God is our refuge and strength, a helper who is always found in times of trouble."],["Romans 5:8","But God proves his own love for us in that while we were still sinners, Christ died for us."],["Proverbs 18:10","The name of the Lord is a strong tower; the righteous run to it and are protected."],["Hebrews 11:1","Now faith is the reality of what is hoped for, the proof of what is not seen."],["Psalm 27:1","The Lord is my light and my salvation\u2014whom should I fear? The Lord is the stronghold of my life\u2014whom should I dread?"],["John 10:11","I am the good shepherd. The good shepherd lays down his life for the sheep."],["Hebrews 13:8","Jesus Christ is the same yesterday, today, and forever."],["Isaiah 41:10","Do not fear, for I am with you; do not be afraid, for I am your God. I will strengthen you; I will help you; I will hold on to you with my righteous right hand."],["Jeremiah 29:11","For I know the plans I have for you\u2014this is the Lord's declaration\u2014plans for your well-being, not for disaster, to give you a future and a hope."],["Romans 8:28","We know that all things work together for the good of those who love God, who are called according to his purpose."],["Ephesians 2:8-9","For you are saved by grace through faith, and this is not from yourselves; it is God's gift\u2014 not from works, so that no one can boast."],["Philippians 4:13","I am able to do all things through Him who strengthens me."],["Psalm 46:10","Stop your fighting, and know that I am God, exalted among the nations, exalted on the earth."],["Matthew 28:20","teaching them to observe everything I have commanded you. And remember, I am with you always, to the end of the age."],["1 Corinthians 10:13","No temptation has overtaken you except what is common to humanity. God is faithful and He will not allow you to be tempted beyond what you are able, but with the temptation He will also provide a way of escape, so that you are able to bear it."],["Psalm 23:1","The Lord is my shepherd; I have what I need."],["Isaiah 9:6","For a child will be born for us, a son will be given to us, and the government will be on his shoulders. He will be named Wonderful Counselor, Mighty God, Eternal Father, Prince of Peace."],["Matthew 11:28-30","Come to me, all of you who are weary and burdened, and I will give you rest. Take my yoke upon you and learn from me, because I am lowly and humble in heart, and you will find rest for your souls. For my yoke is easy and my burden is light."],["James 1:5","Now if any of you lacks wisdom, he should ask God, who gives to all generously and without criticizing, and it will be given to him."],["1 Peter 5:7","casting all your cares on him, because he cares about you."],["Joshua 1:9","Haven't I commanded you: be strong and courageous? Do not be afraid or discouraged, for the Lord your God is with you wherever you go."],["Deuteronomy 31:6","Be strong and courageous; don't be terrified or afraid of them. For it is the Lord your God who goes with you; He will not leave you or forsake you."],["Philippians 4:7","And the peace of God, which surpasses all understanding, will guard your hearts and minds in Christ Jesus."],["Exodus 3:14","God replied to Moses, 'I AM WHO I AM. This is what you are to say to the Israelites: I AM has sent me to you.'"],["John 6:35","I am the bread of life. Whoever comes to me will never go hungry, and whoever believes in me will never be thirsty."],["John 8:12","I am the light of the world. Whoever follows me will never walk in darkness, but will have the light of life."],["John 10:9","I am the gate; whoever enters through me will be saved."],["John 11:25-26","I am the resurrection and the life. The one who believes in me will live, even though they die; and whoever lives by believing in me will never die."],["John 14:6","I am the way and the truth and the life. No one comes to the Father except through me."],["John 15:1","I am the true vine, and my Father is the gardener."],["John 8:58","Truly, truly, I say to you, before Abraham was, I am."],["Revelation 1:8","I am the Alpha and the Omega, says the Lord God, who is, and who was, and who is to come, the Almighty."],["Proverbs 3:5-6","Trust in the Lord with all your heart, and do not rely on your own understanding; in all your ways know him, and he will make your paths straight."],["2 Corinthians 5:17","Therefore, if anyone is in Christ, he is a new creation; the old has passed away, and see, the new has come!"],["Matthew 6:24","No one can serve two masters, since either he will hate one and love the other, or he will be devoted to one and despise the other. You cannot serve both God and money."],["2 Timothy 1:7","For God has not given us a spirit of fear, but of power and of love and of a sound mind."],["Romans 12:2","Do not be conformed to this age, but be transformed by the renewing of your mind, so that you may discern what is the good, pleasing, and perfect will of God."],["Proverbs 9:8-9","Do not rebuke mockers or they will hate you; rebuke the wise and they will love you. Instruct the wise and they will be wiser still; teach the righteous and they will add to their learning."],["Galatians 2:20","I have been crucified with Christ, and I no longer live, but Christ lives in me. The life I now live in the body, I live by faith in the Son of God, who loved me and gave himself for me."]]}const header=document.querySelector("header"),headerHeight=3*parseFloat(getComputedStyle(document.documentElement).fontSize),toTop=document.getElementById("toTop");function goToTop(){window.scrollTo(0,0)}let lastUpdatedPath="",isInitial=!0,historyStack=new Map,currentHistoryIndex=-1;history.scrollRestoration="manual";function scrollSPA(t,e=!1){if(t&&t.nodeType&&!(t instanceof Event)){const n=e?"instant":"smooth";t.closest("article").scrollIntoView({behavior:n});const s=e?0:headerHeight,r=t.getBoundingClientRect().top+window.scrollY-s;window.scrollTo({top:r,behavior:n});return}currentHistoryIndex>=0&&(historyStack.get(currentHistoryIndex).scrollY=window.scrollY),window.scrollY>headerHeight*.6?header.classList.add("scrolled-down"):header.classList.remove("scrolled-down"),document.body.scrollTop>window.innerHeight||document.documentElement.scrollTop>window.innerHeight?toTop.style.display="inline-block":toTop.style.display="none";const i=document.querySelectorAll("article");let l,o,c=!1;if(i.forEach(n=>{if(c)return;const s=n.getBoundingClientRect();if(s.top<=window.innerHeight/2&&s.bottom>=window.innerHeight/2){l=n;const r=n.querySelectorAll(".section-title");for(let d=r.length-1;d>=0;d--){const a=r[d];if(a.getBoundingClientRect().top<=window.innerHeight/2){o=a;break}}c=!0}}),l){let n=l.id;if(o&&(n+=`/${o?.id}`),n!==lastUpdatedPath){const s=o?o.id:void 0;historyStack.get(currentHistoryIndex).sectionId=s,historyStack.get(currentHistoryIndex).path=n,history.replaceState({historyIndex:currentHistoryIndex},"",`/${n}`),lastUpdatedPath=n}}}["scroll","touchmove","resize"].forEach(t=>window.addEventListener(t,throttle(()=>{scrollSPA(t)},150)));const articleObserver=new IntersectionObserver(t=>{t.forEach(e=>{e.isIntersecting&&(e.target.querySelector(".article-content").style.display="block",articleObserver.unobserve(e.target))})}),articles=document.querySelectorAll("article");articles.forEach(t=>{t.querySelector(".article-content").style.display="none",articleObserver.observe(t)});function showBottomNav(t){let e=t.querySelector(".article-nav-bottom");if(!e){const i=t.querySelector(".article-nav");i&&(e=i.cloneNode(!0),e.classList.add("article-nav-bottom"),t.appendChild(e))}}const welcome=document.getElementById("welcome");function showAllArticles(t=!1){articles.forEach((e,i)=>{e.style.display="block",i!==0&&(e.querySelector(".article-content").style.display="none",articleObserver.observe(e));const l=e.querySelector(".article-nav-bottom");l&&l.remove()}),welcome.style.display="block",t||goToTop()}function showArticle(t,e,i=!1,l=!1){articles.forEach(o=>{if(o.id!==t){o.style.display="none";return}o.style.display="block",welcome.style.display="none";const c=o.querySelector(".article-content");if(c&&(c.style.display="block"),showBottomNav(o),l){const s=(e?o.querySelector(`.section-title#${e}`):o).getBoundingClientRect().top+window.scrollY-headerHeight;window.scrollTo({top:s,behavior:"instant"})}else scrollSPA(e?o.querySelector(`.section-title#${e}`):o,i&&!!e)})}const initialPath=window.location.pathname.substring(1),initialHash=window.location.hash.substring(1);let initialArticleId=null,initialSectionId=null;if(initialPath){const[t,e]=initialPath.split("/");t&&document.getElementById(t)?(showArticle(t,e,!0),initialArticleId=t,initialSectionId=e):showAllArticles()}else initialHash?handleHash(initialHash):showAllArticles();currentHistoryIndex=0,historyStack.set(0,{path:initialPath,articleId:initialArticleId,sectionId:initialSectionId,scrollY:0}),history.replaceState({historyIndex:0},"",window.location.pathname),document.body.setAttribute(`data-history-${currentHistoryIndex}`,"true"),scrollSPA(),window.onpopstate=t=>{if(t.state&&t.state.historyIndex!==void 0){currentHistoryIndex=t.state.historyIndex,document.body.setAttribute(`data-history-${currentHistoryIndex}`,"true");const e=historyStack.get(currentHistoryIndex);e.articleId?showArticle(e.articleId,e.sectionId,!1,!0):(showAllArticles(!0),window.scrollTo({top:e.scrollY,behavior:"instant"}))}else showAllArticles()};function handleHash(t){t==="now-playing"||!document.getElementById(t.split("/")[0])?navigateSPA("/"):navigateSPA(t)}window.addEventListener("hashchange",()=>handleHash(window.location.hash.substring(1)));function navigateSPA(t,e){const i=t instanceof Event?t:void 0,l=i?e:t;if(i&&i.preventDefault(),l.startsWith("#")){handleHash(l.substring(1));return}const[o,c]=l.split("/"),n=l;if(n!==historyStack.get(currentHistoryIndex)?.path){currentHistoryIndex>=0&&(historyStack.get(currentHistoryIndex).scrollY=window.scrollY),currentHistoryIndex++;for(let s of Array.from(historyStack.keys()).sort((r,d)=>r-d))s>currentHistoryIndex&&historyStack.delete(s);historyStack.set(currentHistoryIndex,{path:n,articleId:o,sectionId:c,scrollY:0}),history.pushState({historyIndex:currentHistoryIndex},"",n?`/${n}`:"/"),document.body.setAttribute(`data-history-${currentHistoryIndex}`,"true"),o?showArticle(o,c,!1,!1):showAllArticles()}}const shiftLayer1=document.getElementById("shift-layer1"),shiftLayer2=document.getElementById("shift-layer2"),bg=document.getElementById("bg"),allShiftLayers=Array.from(document.querySelectorAll('[id^="shift-layer"]')),totalShiftLayers=allShiftLayers.length;function getShiftLayerInfo(r){const t=r.id.match(/shift-layer(\d+)/);return{currentLayer:t?parseInt(t[1]):null,totalLayers:totalShiftLayers}}function randomlyModifyValue(r,t=.85,i=1.15){if(Math.random()<.333){const n=Math.random()*(i-t)+t;return Math.round(r*n)}return Math.round(r)}function getRandomInRange(r,t,i=1,n){if(!n.id.startsWith("shift-layer"))return(Math.random()*(t-r)+r)*i;const{currentLayer:o}=getShiftLayerInfo(n);return o!=null?randomlyModifyValue(Math.random()*(t-r)+r)*i:(Math.random()*(t-r)+r)*i}function roundTo(r,t){const i=10**t;return Math.round(r*i)/i}function getRandomTransitionDuration(r){return Math.round(getRandomInRange(7e3,21e3,1,r))}function getRandomHueShift(r){return roundTo(getRandomInRange(-180,180,1,r),1)}function getRandomFilterValue(r){return roundTo(getRandomInRange(87,185,1,r),1)}function getRandomOpacityValue(r){return roundTo(getRandomInRange(65,95,1,r),1)}function getRandomOpacityValue2(r){return roundTo(getRandomInRange(.29,.37,1,r),3)}function getRandomGradientSteps(r){const{currentLayer:t}=getShiftLayerInfo(r);return t===1?7*Math.ceil(Math.random()*7):randomlyModifyValue(Math.ceil(Math.random()*12)+2)}function createLayerState(r){const{currentLayer:t}=getShiftLayerInfo(r);return{transitionCurrentTime:0,transitionProgress:0,transitionDuration:t===1?8e3:5e3,currentGradientSteps:getRandomGradientSteps(r),currentContrast:100,currentBrightness:100,currentSaturation:100,currentOpacity:.75,currentHueShift:0,targetGradientSteps:getRandomGradientSteps(r),targetContrast:getRandomFilterValue(r),targetBrightness:getRandomFilterValue(r),targetSaturation:getRandomFilterValue(r),targetOpacity:getRandomOpacityValue(r),targetHueShift:getRandomHueShift(r)}}function createBgLayerState(r){const t=r.id==="bg"?.33:1;return{transitionCurrentTime:0,transitionProgress:0,transitionDuration:getRandomTransitionDuration(r),currentOpacity:t,targetOpacity:getRandomOpacityValue2(r)}}let lastGradient1="",lastGradient2="";function setGradient(r,t){const{currentLayer:i}=getShiftLayerInfo(r),n=r.offsetWidth||r.clientWidth,o=r.offsetHeight||r.clientHeight,c=Math.sqrt(n**2+o**2)/(Math.max(n,o)*Math.sqrt(2))*100;let h=[];const s=t.currentGradientSteps,d=360/s;for(let u=0;u<s;u++){const g=u*d,f=50+50*Math.cos(g*Math.PI/180),y=50+50*Math.sin(g*Math.PI/180),S=u+s;h.push(`radial-gradient(ellipse farthest-corner at ${roundTo(f,1)}% ${roundTo(y,1)}%, hsl(${S*d}, 100%, 50%), transparent ${roundTo(c,1)}%)`)}const e=h.join(", ");(r.id==="shift-layer1"&&e!==lastGradient1||r.id==="shift-layer2"&&e!==lastGradient2)&&(r.style.backgroundImage=e,r.id==="shift-layer1"?lastGradient1=e:lastGradient2=e),r.style.filter=` opacity(${t.currentOpacity}%) contrast(${t.currentContrast}%) brightness(${t.currentBrightness}%) saturate(${t.currentSaturation}%) hue-rotate(${t.currentHueShift}deg) `.trim()}function updateLayerState(r,t,i){r.transitionCurrentTime+=i,r.transitionProgress=Math.min(1,r.transitionProgress+i/r.transitionDuration);const n=()=>metaRecursiveEaseNoise(r.transitionProgress),{currentLayer:o}=getShiftLayerInfo(t),a=c=>Math.random()*c;o===1?(r.currentGradientSteps+=Math.round((r.targetGradientSteps-r.currentGradientSteps)*n()*5e-5*a(10))/10,r.currentHueShift+=Math.round((r.targetHueShift-r.currentHueShift)*n()*.05*a(10))/10):(r.currentGradientSteps+=Math.round((r.targetGradientSteps-r.currentGradientSteps)*n()*.05*a(10))/10,r.currentHueShift+=Math.round((r.targetHueShift-r.currentHueShift)*n()*.01*a(10))/10),r.currentContrast+=Math.round((r.targetContrast-r.currentContrast)*n()*a(1)*10)/10,r.currentBrightness+=Math.round((r.targetBrightness-r.currentBrightness)*n()*a(1)*10)/10,r.currentSaturation+=Math.round((r.targetSaturation-r.currentSaturation)*n()*a(1)*10)/10,r.currentOpacity+=Math.round((r.targetOpacity-r.currentOpacity)*n()*a(1)*10)/10,r.transitionCurrentTime>=r.transitionDuration&&(r.transitionCurrentTime=0,r.transitionProgress=0,r.transitionDuration=getRandomTransitionDuration(t),r.targetHueShift=getRandomHueShift(t),r.targetGradientSteps=getRandomGradientSteps(t),r.targetContrast=getRandomFilterValue(t),r.targetBrightness=getRandomFilterValue(t),r.targetSaturation=getRandomFilterValue(t),r.targetOpacity=getRandomOpacityValue(t))}function updateBgLayerState(r,t,i){r.transitionCurrentTime+=i,r.transitionProgress=Math.min(1,r.transitionProgress+i/r.transitionDuration*Math.random());const n=()=>metaRecursiveEaseNoise(r.transitionProgress);r.currentOpacity+=Math.round((r.targetOpacity-r.currentOpacity)*n()*Math.random()*1e3)/1e3,r.transitionCurrentTime>=r.transitionDuration&&(r.transitionCurrentTime=0,r.transitionProgress=0,r.transitionDuration=getRandomTransitionDuration(t),r.targetOpacity=t.id==="bg"?getRandomOpacityValue2(t):getRandomOpacityValue(t))}function updateColors(r){if(!isWindowActive){requestAnimationFrame(updateColors);return}const t=r-lastBGUpdateTime;lastBGUpdateTime=r,updateLayerState(shiftLayer1State,shiftLayer1,t),updateLayerState(shiftLayer2State,shiftLayer2,t),setGradient(shiftLayer1,shiftLayer1State),setGradient(shiftLayer2,shiftLayer2State),updateBgLayerState(bgState,bg,t),bg.style.opacity=bgState.currentOpacity,requestAnimationFrame(updateColors)}let shiftLayer1State,shiftLayer2State,bgState,lastBGUpdateTime;setTimeout(()=>{shiftLayer1State=createLayerState(shiftLayer1),shiftLayer2State=createLayerState(shiftLayer2),bgState=createBgLayerState(bg),lastBGUpdateTime=performance.now(),requestAnimationFrame(updateColors)},delayOtherResources);const hoverShift=document.querySelectorAll("button, a, .article-nav-bottom, footer"),alwaysShift=document.querySelectorAll("header, #site-title, #toolbar, nav .col a, .article-header, .article-title, .section-nav, footer");function getRandomHueRotation(){return Math.random()<.5?-45-Math.floor(Math.random()*270):45+Math.floor(Math.random()*270)}function getRandomInterval(){return 7e3+Math.floor(Math.random()*14e3)}function isElementInViewport(a){const n=a.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth,t=r*.8;return n.top>=-t&&n.left>=0&&n.bottom<=r+t&&n.right<=i}function startShift(a,n,r=!1){let i=getRandomHueRotation(),t=i,e=100,o=100,s=100,c=100,u=100,m=100,d=0,g=performance.now(),f=!0;function v(){const l=` hue-rotate(${i}deg) saturate(${e}%) contrast(${s}%) brightness(${u}%) ${r?"drop-shadow(0 0 1em rgba(255, 255, 255, 0.5))":""} `.trim();a.style.filter=l}function M(l){if(f){if(isWindowActive&&isElementInViewport(a)){const p=l-g;g=l,d+=p/n,d>=1&&(t=getRandomHueRotation(),o=Math.random()*35+90,c=Math.random()*(r?90:40)+80,m=Math.random()*(r?50:20)+(r?85:90),d=0);const h=()=>metaRecursiveEaseNoise(d);i+=Math.round((t-i)*h()*Math.random()*.07),e+=Math.round((o-e)*h()*Math.random()),s+=Math.round((c-s)*h()*Math.random()),u+=Math.round((m-u)*h()*Math.random()),v()}f&&requestAnimationFrame(M)}}return v(),requestAnimationFrame(M),()=>{f=!1,a.style.filter="none"}}function handleDisengage(a,n){n&&n(),a.style.filter="none"}setTimeout(()=>{const a={threshold:0,rootMargin:"200px"},n=new IntersectionObserver(t=>{t.forEach(e=>{const o=e.target;e.isIntersecting&&!o._isAnimating&&(o._stopper=startShift(o,getRandomInterval()),o._isAnimating=!0)})},a);let r=0;const i=15;alwaysShift.forEach((t,e)=>{setTimeout(()=>{n.observe(t)},r),e%i===i-1&&(r+=10)}),window.addEventListener("beforeunload",()=>{alwaysShift.forEach(t=>{t._stopper&&(t._stopper(),t._stopper=null)}),n.disconnect()}),isMobile||hoverShift.forEach(t=>{let e=null,o=null;const s=throttle(u=>{e&&e(),e=startShift(t,getRandomInterval(),!0)},30),c=debounce(()=>handleDisengage(t,e),30);t.addEventListener("mouseover",s),t.addEventListener("click",s),t.addEventListener("touchstart",()=>{e&&e(),e=startShift(t,getRandomInterval(),!0),o&&clearTimeout(o),o=setTimeout(()=>handleDisengage(t,e),888)}),t.addEventListener("mouseout",c)})},delayOtherResources2);
