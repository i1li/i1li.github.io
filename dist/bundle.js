// Hello and God bless! Christ is King! https://github.com/i1li/i
let isWindowActive=!document.hidden;const isMobile=window.matchMedia("(orientation: portrait)").matches||window.innerHeight>window.innerWidth||/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|windows phone|kindle|playbook|silk|mobile|tablet|samsung|lg|htc|nokia|motorola|symbian|fennec|maemo|tizen|blazer|series60|ucbrowser|bada|micromessenger|webview/.test(navigator.userAgent.toLowerCase());function debounce(n,e){let t;return function(...o){clearTimeout(t),t=setTimeout(()=>{n.apply(this,o)},e)}}function throttle(n,e){let t,o;return function(){const i=this,a=arguments;o?(clearTimeout(t),t=setTimeout(function(){Date.now()-o>=e&&(n.apply(i,a),o=Date.now())},Math.max(0,e-(Date.now()-o)))):(n.apply(i,a),o=Date.now())}}function easeInOutCubic(n){return n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2}const permutation=[...Array(256)].map(()=>Math.floor(Math.random()*256)),p=[...permutation,...permutation];function fade(n){return n*n*n*(n*(n*6-15)+10)}function lerp(n,e,t){return e+n*(t-e)}function grad(n,e){const t=n&15,o=1+(t&7);return(t&8?-o:o)*e}function noise(n){const e=Math.floor(n)&255;n-=Math.floor(n);const t=fade(n);return lerp(t,grad(p[e],n),grad(p[e+1],n-1))}function easeWithNoise(n,e=Math.random(),t=Math.random()/3){const o=easeInOutCubic(n),i=noise(n*e)*t;return Math.max(0,Math.min(1,o+i))}if(!isMobile){let a=function(t,n=.85,e=1.15){if(Math.random()<.333){const r=Math.random()*(e-n)+n;return Math.round(t*r)}return Math.round(t)},u=function(t,n,e,r=1){return a(Math.random()*(e-n)+n)*r},s=function(t){return u(t,-3,3)},d=function(t){return u(t,10,20)},o=function(t){return u(t,87,185)},f=function(t){return u(t,.6,1)},c=function(t){return t?7*Math.ceil(Math.random()*3):a(Math.ceil(Math.random()*5)+2)},p=function(t){const n=d(t);return{hueIncrement:s(t),intervalCount:0,intervalsTillNextChange:t?n:Math.round(n*Math.random()),transitionProgress:0,transitionDuration:n*g,currentHueStep:c(t),currentContrast:100,currentBrightness:100,currentSaturation:100,currentOpacity:.75,targetHueStep:c(t),targetContrast:o(t),targetBrightness:o(t),targetSaturation:o(t),targetOpacity:f(t),hueShift:0}},M=function(t,n,e=!1){function r(i,h){return i*h}const C=t.offsetWidth||t.clientWidth,H=t.offsetHeight||t.clientHeight,x=Math.sqrt(C*C+H*H)/(Math.max(C,H)*Math.sqrt(2))*100;let I=[];const P=n.currentHueStep,$=360/P;for(let i=0;i<P;i++){const h=i*$,y=50+50*Math.cos(h*Math.PI/180),N=50+50*Math.sin(h*Math.PI/180),T=e?i+n.currentHueStep:i;I.push(`radial-gradient(ellipse farthest-corner at ${y}% ${N}%, hsl(${r(T,$)}, 100%, 50%), transparent ${x}%)`)}t.style.backgroundImage=I.join(", "),t.style.opacity=n.currentOpacity,t.style.filter=`contrast(${n.currentContrast}%) brightness(${n.currentBrightness}%) saturate(${n.currentSaturation}%) hue-rotate(${n.hueShift}deg)`},v=function(t,n,e){t.intervalCount+=e,t.transitionProgress+=e/t.transitionDuration*(.2+Math.random()*.5),t.transitionProgress>1&&(t.transitionProgress=1);const r=easeWithNoise(t.transitionProgress);n?t.currentHueStep+=(t.targetHueStep-t.currentHueStep)*(r*5e-4)*Math.random():t.currentHueStep+=(t.targetHueStep-t.currentHueStep)*(r*.005)*Math.random(),t.currentContrast+=(t.targetContrast-t.currentContrast)*r,t.currentBrightness+=(t.targetBrightness-t.currentBrightness)*r,t.currentSaturation+=(t.targetSaturation-t.currentSaturation)*r,t.currentOpacity+=(t.targetOpacity-t.currentOpacity)*r,t.hueShift+=t.hueIncrement*(e/1e3),t.intervalCount>=t.intervalsTillNextChange*g&&(t.intervalCount=0,t.transitionProgress=0,t.hueIncrement=s(n),t.intervalsTillNextChange=d(n),t.transitionDuration=t.intervalsTillNextChange*g,t.targetHueStep=c(n),t.targetContrast=o(n),t.targetBrightness=o(n),t.targetSaturation=o(n),t.targetOpacity=f(n))},m=function(t){const n=t-l;w+=n,v(S,!1,n),v(B,!0,n),M(O,S),M(W,B,!0),l=t,A(m)};var randomlyModifyValue=a,getRandomInRange=u,getRandomHueIncrement=s,getIntervalsTillNextChange=d,getRandomFilterValue=o,getRandomOpacityValue=f,getRandomHueStep=c,createLayerState=p,setGradient=M,updateLayerState=v,updateColors=m;let l=performance.now(),w=0;const g=300;window.addEventListener("focus",throttle(()=>isWindowActive=!0,500)),window.addEventListener("blur",throttle(()=>isWindowActive=!1,500)),document.addEventListener("visibilitychange",throttle(()=>{isWindowActive=!document.hidden,document.hidden||(l=performance.now(),w=0)},500));const O=document.getElementById("shift-layer1"),W=document.getElementById("shift-layer2");let S=p(!1),B=p(!0);const A=throttle(t=>{requestAnimationFrame(t)},16);isWindowActive&&A(m)}if(window.SPA404Redirect){const e=window.SPA404Redirect.search.slice(1).split("&").map(d=>d.replace(/~and~/g,"&")).join("?"),i=window.SPA404Redirect.origin+window.SPA404Redirect.pathname.slice(0,-1)+e+window.SPA404Redirect.hash;window.history.replaceState(null,null,i),delete window.SPA404Redirect}function shuffle(e,t=1/0){if(e.length===1)return e;if(e.length<Math.min(t*2,e.length)){const n=[],l=new Set;for(;l.size<Math.min(t,e.length);){const o=Math.floor(Math.random()*e.length);l.add(o)}for(const o of l)n.push(e[o]);return n}else{for(let n=e.length-1;n>0;n--){const l=Math.floor(Math.random()*(n+1));[e[n],e[l]]=[e[l],e[n]]}return e.slice(0,Math.min(t,e.length))}}const shuffleDiv=document.getElementById("shuffle"),elements=[...shuffleDiv.querySelectorAll("y-t")];let combinedElements=[],elementIdsMap=new Map;function processAndCombine(e,t){if(processedElements.has(t))return;const n=e.getAttribute("v");let l;elementIdsMap.has(t)?l=elementIdsMap.get(t):(l=n.split(","),elementIdsMap.set(t,l)),shuffle(l,3).forEach(s=>combinedElements.push(s.split("?")[0]));const c=shuffle(l,150);if(e.setAttribute("v",c.join(",")),processedElements.add(t),t<elements.length-1)processAndCombine(elements[t+1],t+1);else{const d=document.getElementById("combined-list").querySelector("y-t"),i=[...new Set(combinedElements)],m=shuffle(i,150);d.setAttribute("v",m.join(","))}}let processedElements=new Set;processAndCombine(elements[0],0);function shuffleAndDraw(){shuffle(elements);let e=0,t=document.getElementById("draw");const n=elements[e].cloneNode(!1);processAndCombine(n,e),t.appendChild(n),document.querySelector("#next").addEventListener("click",function(){e=(e+1)%elements.length,t.innerHTML="";const o=elements[e].cloneNode(!1);processAndCombine(o,e),t.appendChild(o)})}shuffleAndDraw();class YTEmbed extends HTMLElement{constructor(){super();const t=this.getAttribute("v"),[e,o]=t.split("?");this.id=e,this.params=o;const s=this.id.split(",");this.videoIds=s;let i,n;switch(this.throttledCheckViewport=this.checkViewport.bind(this),this.throttledCheckViewport=throttle(this.throttledCheckViewport,500),!0){default:this.classList.contains("no-link-embed")?(i=`https://www.youtube.com/watch?v=${this.id}${this.params?"&"+this.params+"&":"&"}autoplay=1`,n=`https://www.youtube-nocookie.com/embed/${this.id}${this.params?"?"+this.params+"&":"?"}autoplay=1`):this.classList.contains("no-embed")?i=`https://www.youtube.com/watch?v=${this.id}${this.params?"&"+this.params+"&":"&"}autoplay=1`:(i=`https://www.youtube-nocookie.com/embed/${this.id}${this.params?"?"+this.params+"&":"?"}autoplay=1`,n=i);break;case this.videoIds.length>1:this.classList.contains("no-link-embed")?(i=`https://www.youtube.com/watch_videos?video_ids=${this.videoIds.join(",")}&autoplay=1`,n=`https://www.youtube-nocookie.com/embed/?playlist=${this.videoIds.join(",")}&autoplay=1`):this.classList.contains("no-embed")?i=`https://www.youtube.com/watch_videos?video_ids=${this.videoIds.join(",")}&autoplay=1`:(i=`https://www.youtube-nocookie.com/embed/?playlist=${this.videoIds.join(",")}&autoplay=1`,n=i);break;case(this.id.length>11&&(this.id.startsWith("PL")||this.id.startsWith("TL")||this.id.startsWith("OL")||this.id.startsWith("FL")||this.id.startsWith("UU"))):this.classList.contains("no-link-embed")?(i=`https://www.youtube.com/playlist?list=${this.id}&autoplay=1`,n=`https://www.youtube-nocookie.com/embed/videoseries?list=${this.id}&autoplay=1`):this.classList.contains("no-embed")?i=`https://www.youtube.com/playlist?list=${this.id}&autoplay=1`:(i=`https://www.youtube-nocookie.com/embed/videoseries?list=${this.id}&autoplay=1`,n=i);break}this.linkUrl=i,this.embedUrl=n,this.link=document.createElement("a"),this.link.textContent=this.getAttribute("t")||"View Video",this.link.title="View video in new tab",this.link.href=this.linkUrl,this.button=document.createElement("button"),this.button.textContent="\u25B6\uFE0F Play",this.button.title="Play Video",this.button.className="showHideButton",this.classList.contains("no-embed")?(this.button.onclick=()=>window.open(this.linkUrl),this.appendChild(this.button),this.appendChild(this.link)):(this.button.onclick=()=>this.toggleVideo(),this.wrapper=document.createElement("div"),this.wrapper.className="yt-wrapper",this.appendChild(this.button),this.appendChild(this.link),this.appendChild(this.wrapper))}toggleVideo(){const t=this.wrapper.querySelector("iframe");if(t)this.wrapper.removeChild(t),this.wrapper.style.display="none",this.button.textContent="\u25B6\uFE0F Play",this.button.title="Play Video",this.removeAttribute("data-now-playing"),this.removeAttribute("data-video-path"),this.removeRemoteControl();else{this.closeOtherVideos();const e=document.createElement("iframe");e.src=this.embedUrl,e.allowFullscreen=!0,e.className="yt",this.wrapper.appendChild(e),this.wrapper.style.display="block",this.button.textContent="\u23F9\uFE0F Stop",this.button.title="Stop Video",this.setAttribute("data-now-playing","true");const o=this.closest("article"),s=this.closest("section");let i="/";o&&(i+=o.id,s&&(i+=`/${s.id}`)),this.setAttribute("data-video-path",i),this.createRemoteControl(),this.setupViewportCheck()}}closeOtherVideos(){document.querySelectorAll("y-t[data-now-playing]").forEach(e=>{if(e!==this){const o=e.querySelector("button.showHideButton");if(o&&o.textContent==="\u23F9\uFE0F Stop"){e.removeAttribute("data-now-playing"),e.removeAttribute("data-video-path");const s=e.querySelector(".yt-wrapper");if(s){const i=s.querySelector("iframe");i&&s.removeChild(i),s.style.display="none"}o.textContent="\u25B6\uFE0F Play",o.title="Play Video"}}})}createRemoteControl(){let t=document.getElementById("remote-control");if(!t){t=document.createElement("div"),t.id="remote-control",t.style.opacity="0",t.style.pointerEvents="none",document.body.appendChild(t);const s=document.createElement("div");s.id="now-playing-text",s.innerHTML="\u{1F50A}Now<br>Playing:",s.style.opacity="0",s.style.pointerEvents="none",document.body.appendChild(s);const i=document.createElement("div");i.id="expand-icon",i.setAttribute("aria-label","Expand Remote Control"),document.body.appendChild(i);const n=()=>{t.style.opacity="0.7",t.style.pointerEvents="auto",i.style.opacity="0",i.style.pointerEvents="none",s.style.opacity="0",s.style.pointerEvents="none"};i.onclick=n,i.onmouseenter=n,t.onmouseleave=()=>{this.isOutOfViewport()&&(t.style.opacity="0",t.style.pointerEvents="none",i.style.opacity="0.2",i.style.pointerEvents="auto",s.style.opacity="0.55",s.style.pointerEvents="auto")}}t.innerHTML="";const e=this.button.cloneNode(!0);e.style="",e.onclick=()=>this.toggleVideo();const o=document.createElement("a");o.textContent="Go to video",o.style.marginTop="10px",o.onclick=s=>{s.preventDefault(),this.navigateToNowPlaying()},this.updateNowPlayingLink(o),t.appendChild(e),t.appendChild(o),this.checkViewport()}checkViewport(){const t=document.getElementById("remote-control"),e=document.getElementById("expand-icon"),o=document.getElementById("now-playing-text");this.isOutOfViewport()?(t&&(t.style.opacity="0",t.style.pointerEvents="none"),e&&(e.style.opacity="0.2",e.style.pointerEvents="auto"),o&&(o.style.opacity="0.55",o.style.pointerEvents="auto")):(t&&(t.style.opacity="0",t.style.pointerEvents="none"),e&&(e.style.opacity="0",e.style.pointerEvents="none"),o&&(o.style.opacity="0",o.style.pointerEvents="none"))}setupViewportCheck(){["scroll","touchmove","resize"].forEach(t=>window.addEventListener(t,this.throttledCheckViewport)),this.checkViewport()}isOutOfViewport(){const t=this.getBoundingClientRect();return t.bottom<=0||t.right<=0||t.left>=window.innerWidth||t.top>=window.innerHeight}updateNowPlayingLink(t){const e=this.getAttribute("data-video-path");e&&(t.href=`${e}#now-playing`)}navigateToNowPlaying(){const t=document.querySelector("y-t[data-now-playing]");if(t){const e=t.getAttribute("data-video-path");e&&(navigate(e.substring(1)),setTimeout(()=>{const o=t.getBoundingClientRect().top+window.pageYOffset-window.innerHeight*.1;window.scrollTo({top:o,behavior:"smooth"})},100))}}removeEventListeners(){["scroll","touchmove","resize"].forEach(t=>window.removeEventListener(t,this.throttledCheckViewport))}removeRemoteControl(){const t=document.getElementById("remote-control");t&&document.body.removeChild(t);const e=document.getElementById("expand-icon");e&&document.body.removeChild(e);const o=document.getElementById("now-playing-text");o&&document.body.removeChild(o),this.removeEventListeners()}}customElements.define("y-t",YTEmbed);function applyDarkMode(e){document.body.classList.toggle("dark-mode",e),document.querySelectorAll("a, .article-content, .article-content-wrapper, #bg-wrapper, #draw").forEach(t=>{t.classList.toggle("dark-mode",e)})}function toggleDarkMode(){darkMode=!darkMode,applyDarkMode(darkMode),localStorage.setItem("darkMode",darkMode)}let darkMode;const userPrefersDark=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,userPrefersLight=window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches,savedMode=localStorage.getItem("darkMode");savedMode!==null?darkMode=savedMode==="true":userPrefersDark?darkMode=!0:userPrefersLight?darkMode=!1:darkMode=!0,applyDarkMode(darkMode);const modeToggle=document.getElementById("mode-toggle");modeToggle.addEventListener("click",toggleDarkMode);function adjustZoom(o){const n=o?1.05:.95;document.querySelectorAll("html").forEach(function(e){let t=parseFloat(window.getComputedStyle(e).fontSize);t=t*n,e.style.fontSize=t+"px"});const c=parseFloat(window.getComputedStyle(document.documentElement).fontSize);localStorage.setItem("baseFontSize",c)}const savedFontSize=localStorage.getItem("baseFontSize");savedFontSize&&(document.documentElement.style.fontSize=savedFontSize+"px"),document.getElementById("zoom-in").addEventListener("click",function(){adjustZoom(!0)}),document.getElementById("zoom-out").addEventListener("click",function(){adjustZoom(!1)});const scrollTransition=50,header=document.querySelector("header"),toTop=document.getElementById("toTop");function goToTop(){window.scrollTo(0,0)}function handleScroll(){window.scrollY>50?header.classList.add("scrolled-down"):header.classList.remove("scrolled-down"),document.body.scrollTop>50*7||document.documentElement.scrollTop>50*7?(toTop.style.opacity="0.4",toTop.style.pointerEvents="auto"):(toTop.style.opacity="0",toTop.style.pointerEvents="none")}function updateURLOnScroll(){const e=document.querySelectorAll("article");let o,n;if(e.forEach(t=>{const c=t.getBoundingClientRect();if(c.top<=window.innerHeight/2&&c.bottom>=window.innerHeight/2){o=t;const i=t.querySelectorAll(".section-title");for(let l=i.length-1;l>=0;l--){const s=i[l];if(s.getBoundingClientRect().top<=window.innerHeight/2){n=s;break}}}}),o){let t=o.id;n&&(t+=`/${n.id}`),t!==lastUpdatedPath&&(history.replaceState(null,"",`/${t}`),lastUpdatedPath=t)}}["scroll","touchmove","resize"].forEach(e=>window.addEventListener(e,throttle(()=>{updateURLOnScroll(),handleScroll()},500)));let isInitialLoad=!0,lastUpdatedPath="";const path=window.location.pathname.substring(1),hash=window.location.hash.substring(1),articles=document.querySelectorAll("article"),welcome=document.getElementById("welcome"),observer=new IntersectionObserver(function(t,o){t.forEach(function(e){e.isIntersecting&&(e.target.querySelector(".article-content").style.display="block",o.unobserve(e.target))})});if(articles.forEach(function(t){observer.observe(t),t.querySelector(".article-content").style.display="none"}),path){const[t,o]=path.split("/");t&&document.getElementById(t)?showSingleArticle(t,o):showAllArticles()}else hash?handleHashNavigation(hash):showAllArticles();window.onpopstate=function(t){t.state&&t.state.articleId?showSingleArticle(t.state.articleId,t.state.sectionId):showAllArticles()};function showSingleArticle(t,o){articles.forEach(function(e){if(e.id===t){welcome.style.display="none",e.style.display="block";const l=e.querySelector(".article-content");l&&(l.style.display="block");const s=e.querySelector(".article-nav");if(s){let i=e.querySelector(".article-nav-bottom");i||(i=s.cloneNode(!0),i.classList.add("article-nav-bottom"),e.appendChild(i))}if(o){const i=e.querySelector(`.section-title#${o}`);i&&navigateToElement(i,!0)}else navigateToElement(e,!1);let n=`/${t}`;o&&(n+=`/${o}`),history.replaceState({articleId:t,sectionId:o},"",n)}else e.style.display="none"})}function showAllArticles(){articles.forEach(function(t,o){t.style.display="block",o!==0&&(t.querySelector(".article-content").style.display="none"),observer.observe(t);const e=t.querySelector(".article-nav-bottom");e&&e.remove()}),welcome.style.display="block",header.classList.remove("scrolled-down"),goToTop()}function navigateToElement(t,o=!1){if(o&&isInitialLoad)t.closest("article").scrollIntoView({block:"center"}),setTimeout(()=>{let l=t.getBoundingClientRect().top+window.scrollY;setTimeout(()=>{l=(t.getBoundingClientRect().top+t.getBoundingClientRect().bottom)/2+window.scrollY-window.innerHeight*.15,window.scrollBy({top:l-window.scrollY}),isInitialLoad=!1},200)},200);else if(isInitialLoad){let e=t.getBoundingClientRect().top+window.scrollY-window.innerHeight*.1;window.scrollTo({top:e}),isInitialLoad=!1}else{let e=t.getBoundingClientRect().top+window.scrollY-window.innerHeight*.2;window.scrollTo({top:e})}}function navigate(t){if(t.startsWith("#"))handleHashNavigation(t.substring(1));else{const[o,e]=t.split("/");o?showSingleArticle(o,e):(showAllArticles(),history.replaceState({},"",window.location.origin))}}function handleHashNavigation(t){if(t==="now-playing"||!document.getElementById(t))showAllArticles(),history.replaceState(null,"",window.location.pathname);else{const[o,e]=t.split("/");showSingleArticle(o,e)}}function handleLinks(t){const o=t.target.closest("a");if(o){const e=o.getAttribute("href");if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("//")){o.setAttribute("target","_blank"),o.setAttribute("rel","noreferrer");return}t.preventDefault(),navigate(e.substring(1))}}document.addEventListener("click",handleLinks),window.addEventListener("hashchange",()=>{const t=window.location.hash.substring(1);handleHashNavigation(t)});class SimpleToggle extends HTMLElement{constructor(){super(),this.button=document.createElement("button"),this.button.textContent="Show",this.button.className="showHideButton",this.button.onclick=()=>this.toggleContent(),this.content=document.createElement("div"),this.content.style.display="none",this.template=document.createElement("template"),this.template.innerHTML=this.getAttribute("c"),this.append(this.button,this.content)}toggleContent(){this.content.style.display==="none"?(this.content.appendChild(this.template.content.cloneNode(!0)),this.content.style.display="block",this.button.textContent="Hide"):(this.content.innerHTML="",this.content.style.display="none",this.button.textContent="Show")}}customElements.define("s-t",SimpleToggle);function openOverlay(e){var o=document.getElementById("fullScreenOverlay"),n=document.getElementById("overlayImage");o.style.display="block",n.src=e,document.body.style.overflow="hidden",document.addEventListener("keydown",closeOverlay)}function closeOverlay(){var e=document.getElementById("fullScreenOverlay");e.style.display="none",document.body.style.overflow="auto",document.removeEventListener("keydown",closeOverlay)}var images=document.querySelectorAll("img:not(.img-footer,.img-header,.to-top,.no-overlay)");images.forEach(function(e){e.addEventListener("click",function(){openOverlay(this.src)})});if(!isMobile){let s=function(){return Math.random()<.5?Math.floor(Math.random()*-270)-45:Math.floor(Math.random()*270)+46},d=function(){return Math.floor(Math.random()*30)+20},o=function(){return Math.floor(Math.random()*1e3)+500},v=function(e){const t=e.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,i=r*.5;return t.top>=-i&&t.left>=0&&t.bottom<=r+i&&t.right<=n},a=function(e,t,r=!1){let n=s(),i=n,f=100,M=100,g=100,w=100,m=100,E=100,c=0,b=d(),p=performance.now(),u=!0;function A(){u&&(e.style.filter=` hue-rotate(${n}deg) saturate(${f}%) contrast(${g}%) brightness(${m}%) ${r?"drop-shadow(0 0 1em rgba(255, 255, 255, 0.5))":""} `)}function y(S){if(u){if(isWindowActive&&v(e)){const W=S-p;p=S,c+=W/(t*b),c>=1&&(i+=s(),M=Math.random()*35+90,w=Math.random()*(r?90:40)+80,E=Math.random()*(r?50:20)+(r?85:90),c=0,b=d());const l=easeWithNoise(c);n+=(i-n)*l,f+=(M-f)*l,g+=(w-g)*l,m+=(E-m)*l,A()}u&&requestAnimationFrame(y)}}return requestAnimationFrame(y),()=>{u=!1,e.style.filter="none"}},h=function(e,t){t&&t(),e.style.filter="none"};var getRandomDegree=s,getNewIntervalsTillNextChange=d,getRandomInterval=o,isElementInViewport=v,startShift=a,handleDisengage=h;const T=document.querySelectorAll("button, a, a.dark-mode, footer, .article-nav-bottom, #site-nav a, .section-nav a");document.querySelectorAll("header, #site-nav .col, .section-nav .col, .article-header, footer, .article-title, #site-title, #toolbar").forEach(e=>{e.animateFunction=throttle(()=>a(e,o()),30)()}),T.forEach(e=>{let t,r;e.addEventListener("mouseover",throttle(()=>{t&&t(),t=a(e,o(),!0)},30)),e.addEventListener("click",()=>{t&&t(),t=a(e,o(),!0)}),e.addEventListener("touchstart",()=>{t&&t(),t=a(e,o(),!0),r=setTimeout(()=>h(e,t),888)}),e.addEventListener("mouseout",debounce(()=>{h(e,t)},30))})}function search(){const e=document.getElementById("searchInput").value.toLowerCase(),d=document.querySelectorAll("article"),t=document.getElementById("searchResults");if(t.innerHTML="",e.length===0){t.innerHTML="<p>Enter a search term</p>",t.style.display="block";return}else if(e.length<3){t.style.display="none";return}t.style.display="block";let r=!1;if(d.forEach(function(n){const s=n.textContent.toLowerCase(),c=n.id||"",o=n.querySelector("h1, h2, h3"),u=o?o.textContent:"Untitled Article";if(s.includes(e)){r=!0;const a=s.indexOf(e),i=Math.max(0,a-50),h=Math.min(s.length,a+e.length+50),y=s.substring(i,h).replace(new RegExp(e,"gi"),p=>`<strong>${p}</strong>`),l=document.createElement("div");l.classList.add("search-result");const m=`${c}`;l.innerHTML=` <h3>${c?`<a href="/${m}" class="search-result-link">`:""}${u}${c?"</a>":""}</h3> <p>...${y}...</p> `,t.appendChild(l)}}),t.querySelectorAll(".search-result-link").forEach(n=>{n.addEventListener("click",function(s){closeSearchOverlay()})}),!r){const n=document.createElement("p");n.textContent="No results found.",t.appendChild(n)}}function openSearchOverlay(){document.getElementById("searchOverlay").style.display="block",document.getElementById("searchInput").focus(),document.body.style.overflow="hidden",document.addEventListener("keydown",handleKeyPress),search()}function closeSearchOverlay(){document.getElementById("searchOverlay").style.display="none",document.body.style.overflow="auto",document.removeEventListener("keydown",handleKeyPress),document.getElementById("searchInput").value="",document.getElementById("searchResults").innerHTML=""}function handleKeyPress(e){e.key==="Escape"&&closeSearchOverlay()}document.getElementById("search").addEventListener("click",function(e){e.preventDefault(),openSearchOverlay()}),document.getElementById("searchInput").addEventListener("input",throttle(function(){search()},500));
