// Hello and God bless! Christ is King! https://github.com/i1li/i
const isMobile=window.matchMedia("(orientation: portrait)").matches||window.innerHeight>window.innerWidth||/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|windows phone|kindle|playbook|silk|mobile|tablet|samsung|lg|htc|nokia|motorola|symbian|fennec|maemo|tizen|blazer|series60|ucbrowser|bada|micromessenger|webview/.test(navigator.userAgent.toLowerCase());let isWindowActive=!document.hidden;if(!isMobile){let B=function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2},P=function(t){return t*t*t*(t*(t*6-15)+10)},$=function(t,n,r){return n+t*(r-n)},d=function(t,n){const r=t&15,e=1+(r&7);return(r&8?-e:e)*n},T=function(t){const n=Math.floor(t)&255;t-=Math.floor(t);const r=P(t);return $(r,d(I[n],t),d(I[n+1],t-1))},A=function(t,n=.1,r=.05){const e=B(t),c=T(t*n)*r;return Math.max(0,Math.min(1,e+c))},a=function(t,n=.85,r=1.15){if(Math.random()<.333){const e=Math.random()*(r-n)+n;return Math.round(t*e)}return Math.round(t)},i=function(t,n,r,e=1){return a(Math.random()*(r-n)+n)*e},l=function(t){return i(t,-3,3)},p=function(t){return i(t,10,20)},o=function(t){return i(t,87,185)},M=function(t){return i(t,.6,1)},h=function(t){return t?7*Math.ceil(Math.random()*3):a(Math.ceil(Math.random()*5)+2)},S=function(t){const n=p(t);return{hueIncrement:l(t),intervalCount:0,intervalsTillNextChange:n,transitionProgress:0,transitionDuration:t?n*f:0,currentHueStep:h(t),currentContrast:100,currentBrightness:100,currentSaturation:100,currentOpacity:.75,targetHueStep:h(t),targetContrast:o(t),targetBrightness:o(t),targetSaturation:o(t),targetOpacity:M(t),hueShift:0}},m=function(t,n,r=!1){function e(u,g){return u*g}const c=t.offsetWidth||t.clientWidth,w=t.offsetHeight||t.clientHeight,v=Math.sqrt(c*c+w*w)/(Math.max(c,w)*Math.sqrt(2))*100;let D=[];const q=n.currentHueStep,L=360/q;for(let u=0;u<q;u++){const g=u*L,k=50+50*Math.cos(g*Math.PI/180),F=50+50*Math.sin(g*Math.PI/180),U=r?u+n.currentHueStep:u;D.push(`radial-gradient(ellipse farthest-corner at ${k}% ${F}%, hsl(${e(U,L)}, 100%, 50%), transparent ${v}%)`)}t.style.backgroundImage=D.join(", "),t.style.opacity=n.currentOpacity,t.style.filter=`contrast(${n.currentContrast}%) brightness(${n.currentBrightness}%) saturate(${n.currentSaturation}%) hue-rotate(${n.hueShift}deg)`},C=function(t,n,r){t.intervalCount+=r,t.transitionProgress+=r/t.transitionDuration*(.2+Math.random()*.5),t.transitionProgress>1&&(t.transitionProgress=1);const e=A(t.transitionProgress);n?t.currentHueStep+=(t.targetHueStep-t.currentHueStep)*(e*5e-4)*Math.random():t.currentHueStep+=(t.targetHueStep-t.currentHueStep)*(e*.005)*Math.random(),t.currentContrast+=(t.targetContrast-t.currentContrast)*e,t.currentBrightness+=(t.targetBrightness-t.currentBrightness)*e,t.currentSaturation+=(t.targetSaturation-t.currentSaturation)*e,t.currentOpacity+=(t.targetOpacity-t.currentOpacity)*e,t.hueShift+=t.hueIncrement*(r/1e3),t.intervalCount>=t.intervalsTillNextChange*f&&(t.intervalCount=0,t.transitionProgress=0,t.hueIncrement=l(n),t.intervalsTillNextChange=p(n),t.transitionDuration=t.intervalsTillNextChange*f,t.targetHueStep=h(n),t.targetContrast=o(n),t.targetBrightness=o(n),t.targetSaturation=o(n),t.targetOpacity=M(n))},H=function(t){const n=t-s;x+=n,C(E,!1,n),C(N,!0,n),m(W,E),m(j,N,!0),s=t,y(H)};var easeInOutCubic=B,fade=P,lerp=$,grad=d,noise=T,easeWithNoise=A,randomlyModifyValue=a,getRandomInRange=i,getRandomHueIncrement=l,getIntervalsTillNextChange=p,getRandomFilterValue=o,getRandomOpacityValue=M,getRandomHueStep=h,createLayerState=S,setGradient=m,updateLayerState=C,updateColors=H;const b=[...Array(256)].map(()=>Math.floor(Math.random()*256)),I=[...b,...b],W=document.getElementById("box"),j=document.getElementById("overlay");let s=performance.now(),x=0;const f=300;window.addEventListener("focus",throttle(()=>isWindowActive=!0,500)),window.addEventListener("blur",throttle(()=>isWindowActive=!1,500)),document.addEventListener("visibilitychange",throttle(()=>{isWindowActive=!document.hidden,document.hidden||(s=performance.now(),x=0)},500));let E=S(!1),N=S(!0);const y=throttle(t=>{requestAnimationFrame(t)},16);isWindowActive&&y(H)}if(window.SPA404Redirect){const e=window.SPA404Redirect.search.slice(1).split("&").map(d=>d.replace(/~and~/g,"&")).join("?"),i=window.SPA404Redirect.origin+window.SPA404Redirect.pathname.slice(0,-1)+e+window.SPA404Redirect.hash;window.history.replaceState(null,null,i),delete window.SPA404Redirect}function shuffle(e,t=1/0){if(e.length===1)return e;if(e.length<Math.min(t*2,e.length)){const n=[],l=new Set;for(;l.size<Math.min(t,e.length);){const o=Math.floor(Math.random()*e.length);l.add(o)}for(const o of l)n.push(e[o]);return n}else{for(let n=e.length-1;n>0;n--){const l=Math.floor(Math.random()*(n+1));[e[n],e[l]]=[e[l],e[n]]}return e.slice(0,Math.min(t,e.length))}}const shuffleDiv=document.getElementById("shuffle"),elements=[...shuffleDiv.querySelectorAll("y-t")];let combinedElements=[],elementIdsMap=new Map;function processAndCombine(e,t){if(processedElements.has(t))return;const n=e.getAttribute("v");let l;elementIdsMap.has(t)?l=elementIdsMap.get(t):(l=n.split(","),elementIdsMap.set(t,l)),shuffle(l,3).forEach(s=>combinedElements.push(s.split("?")[0]));const c=shuffle(l,150);if(e.setAttribute("v",c.join(",")),processedElements.add(t),t<elements.length-1)processAndCombine(elements[t+1],t+1);else{const d=document.getElementById("combined-list").querySelector("y-t"),i=[...new Set(combinedElements)],m=shuffle(i,150);d.setAttribute("v",m.join(","))}}let processedElements=new Set;processAndCombine(elements[0],0);function shuffleAndDraw(){shuffle(elements);let e=0,t=document.getElementById("draw");const n=elements[e].cloneNode(!1);processAndCombine(n,e),t.appendChild(n),document.querySelector("#next").addEventListener("click",function(){e=(e+1)%elements.length,t.innerHTML="";const o=elements[e].cloneNode(!1);processAndCombine(o,e),t.appendChild(o)})}shuffleAndDraw();class YTEmbed extends HTMLElement{constructor(){super();const t=this.getAttribute("v"),[e,i]=t.split("?");this.id=e,this.params=i;const s=this.id.split(",");this.videoIds=s;let o,n;switch(this.throttledCheckViewport=this.checkViewport.bind(this),this.throttledCheckViewport=throttle(this.throttledCheckViewport,500),!0){default:this.classList.contains("no-link-embed")?(o=`https://www.youtube.com/watch?v=${this.id}${this.params?"&"+this.params+"&":"&"}autoplay=1`,n=`https://www.youtube-nocookie.com/embed/${this.id}${this.params?"?"+this.params+"&":"?"}autoplay=1`):this.classList.contains("no-embed")?o=`https://www.youtube.com/watch?v=${this.id}${this.params?"&"+this.params+"&":"&"}autoplay=1`:(o=`https://www.youtube-nocookie.com/embed/${this.id}${this.params?"?"+this.params+"&":"?"}autoplay=1`,n=o);break;case this.videoIds.length>1:this.classList.contains("no-link-embed")?(o=`https://www.youtube.com/watch_videos?video_ids=${this.videoIds.join(",")}&autoplay=1`,n=`https://www.youtube-nocookie.com/embed/?playlist=${this.videoIds.join(",")}&autoplay=1`):this.classList.contains("no-embed")?o=`https://www.youtube.com/watch_videos?video_ids=${this.videoIds.join(",")}&autoplay=1`:(o=`https://www.youtube-nocookie.com/embed/?playlist=${this.videoIds.join(",")}&autoplay=1`,n=o);break;case(this.id.length>11&&(this.id.startsWith("PL")||this.id.startsWith("TL")||this.id.startsWith("OL")||this.id.startsWith("FL")||this.id.startsWith("UU"))):this.classList.contains("no-link-embed")?(o=`https://www.youtube.com/playlist?list=${this.id}&autoplay=1`,n=`https://www.youtube-nocookie.com/embed/videoseries?list=${this.id}&autoplay=1`):this.classList.contains("no-embed")?o=`https://www.youtube.com/playlist?list=${this.id}&autoplay=1`:(o=`https://www.youtube-nocookie.com/embed/videoseries?list=${this.id}&autoplay=1`,n=o);break}this.linkUrl=o,this.embedUrl=n,this.link=document.createElement("a"),this.link.textContent=this.getAttribute("t")||"View Video",this.link.title="View video in new tab",this.link.href=this.linkUrl,this.button=document.createElement("button"),this.button.textContent="\u25B6\uFE0F Play",this.button.title="Play Video",this.button.className="showHideButton",this.classList.contains("no-embed")?(this.button.onclick=()=>window.open(this.linkUrl),this.appendChild(this.button),this.appendChild(this.link)):(this.button.onclick=()=>this.toggleVideo(),this.wrapper=document.createElement("div"),this.wrapper.className="yt-wrapper",this.appendChild(this.button),this.appendChild(this.link),this.appendChild(this.wrapper))}toggleVideo(){const t=this.wrapper.querySelector("iframe");if(t)this.wrapper.removeChild(t),this.wrapper.style.display="none",this.button.textContent="\u25B6\uFE0F Play",this.button.title="Play Video",this.removeAttribute("data-now-playing"),this.removeAttribute("data-video-path"),this.removeRemoteControl();else{this.closeOtherVideos();const e=document.createElement("iframe");e.src=this.embedUrl,e.allowFullscreen=!0,e.className="yt",this.wrapper.appendChild(e),this.wrapper.style.display="block",this.button.textContent="\u23F9\uFE0F Stop",this.button.title="Stop Video",this.setAttribute("data-now-playing","true");const i=this.closest("article"),s=this.closest("section");let o="/";i&&(o+=i.id,s&&(o+=`/${s.id}`)),this.setAttribute("data-video-path",o),this.createRemoteControl(),this.setupViewportCheck()}}closeOtherVideos(){document.querySelectorAll("y-t[data-now-playing]").forEach(e=>{if(e!==this){const i=e.querySelector("button.showHideButton");if(i&&i.textContent==="\u23F9\uFE0F Stop"){e.removeAttribute("data-now-playing"),e.removeAttribute("data-video-path");const s=e.querySelector(".yt-wrapper");if(s){const o=s.querySelector("iframe");o&&s.removeChild(o),s.style.display="none"}i.textContent="\u25B6\uFE0F Play",i.title="Play Video"}}})}createRemoteControl(){let t=document.getElementById("remote-control");if(!t){t=document.createElement("div"),t.id="remote-control",t.style.opacity="0",t.style.pointerEvents="none",document.body.appendChild(t);const s=document.createElement("div");s.id="now-playing-text",s.innerHTML="\u{1F50A}Now<br>Playing:",s.style.opacity="0",s.style.pointerEvents="none",document.body.appendChild(s);const o=document.createElement("div");o.id="expand-icon",o.setAttribute("aria-label","Expand Remote Control"),document.body.appendChild(o);const n=()=>{t.style.opacity="0.7",t.style.pointerEvents="auto",o.style.opacity="0",o.style.pointerEvents="none",s.style.opacity="0",s.style.pointerEvents="none"};o.onclick=n,o.onmouseenter=n,t.onmouseleave=()=>{this.isOutOfViewport()&&(t.style.opacity="0",t.style.pointerEvents="none",o.style.opacity="0.2",o.style.pointerEvents="auto",s.style.opacity="0.55",s.style.pointerEvents="auto")}}t.innerHTML="";const e=this.button.cloneNode(!0);e.style="",e.onclick=()=>this.toggleVideo();const i=document.createElement("a");i.textContent="Go to video",i.style.marginTop="10px",i.onclick=s=>{s.preventDefault(),this.navigateToNowPlaying()},this.updateNowPlayingLink(i),t.appendChild(e),t.appendChild(i),this.checkViewport()}checkViewport(){const t=document.getElementById("remote-control"),e=document.getElementById("expand-icon"),i=document.getElementById("now-playing-text");this.isOutOfViewport()?(t&&(t.style.opacity="0",t.style.pointerEvents="none"),e&&(e.style.opacity="0.2",e.style.pointerEvents="auto"),i&&(i.style.opacity="0.55",i.style.pointerEvents="auto")):(t&&(t.style.opacity="0",t.style.pointerEvents="none"),e&&(e.style.opacity="0",e.style.pointerEvents="none"),i&&(i.style.opacity="0",i.style.pointerEvents="none"))}setupViewportCheck(){["scroll","touchmove","resize"].forEach(t=>window.addEventListener(t,this.throttledCheckViewport)),this.checkViewport()}isOutOfViewport(){const t=this.getBoundingClientRect();return t.bottom<=0||t.right<=0||t.left>=window.innerWidth||t.top>=window.innerHeight}updateNowPlayingLink(t){const e=this.getAttribute("data-video-path");e&&(t.href=`${e}#now-playing`)}navigateToNowPlaying(){const t=document.querySelector("y-t[data-now-playing]");if(t){const e=t.getAttribute("data-video-path");e&&(navigate(e.substring(1)),setTimeout(()=>{const i=t.getBoundingClientRect().top+window.pageYOffset-window.innerHeight*.1;window.scrollTo({top:i,behavior:"smooth"})},100))}}removeEventListeners(){["scroll","touchmove","resize"].forEach(t=>window.removeEventListener(t,this.throttledCheckViewport))}removeRemoteControl(){const t=document.getElementById("remote-control");t&&document.body.removeChild(t);const e=document.getElementById("expand-icon");e&&document.body.removeChild(e);const i=document.getElementById("now-playing-text");i&&document.body.removeChild(i),this.removeEventListeners()}}customElements.define("y-t",YTEmbed);function throttle(a,t){let e,i;return function(){const s=this,o=arguments;i?(clearTimeout(e),e=setTimeout(function(){Date.now()-i>=t&&(a.apply(s,o),i=Date.now())},Math.max(0,t-(Date.now()-i)))):(a.apply(s,o),i=Date.now())}}function applyDarkMode(e){document.body.classList.toggle("dark-mode",e),document.querySelectorAll("a, .article-content, .article-content-wrapper, #bg-wrapper, #draw").forEach(t=>{t.classList.toggle("dark-mode",e)})}function toggleDarkMode(){darkMode=!darkMode,applyDarkMode(darkMode),localStorage.setItem("darkMode",darkMode)}let darkMode;const userPrefersDark=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,userPrefersLight=window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches,savedMode=localStorage.getItem("darkMode");savedMode!==null?darkMode=savedMode==="true":userPrefersDark?darkMode=!0:userPrefersLight?darkMode=!1:darkMode=!0,applyDarkMode(darkMode);const modeToggle=document.getElementById("mode-toggle");modeToggle.addEventListener("click",toggleDarkMode);function adjustZoom(o){const n=o?1.05:.95;document.querySelectorAll("html").forEach(function(e){let t=parseFloat(window.getComputedStyle(e).fontSize);t=t*n,e.style.fontSize=t+"px"});const c=parseFloat(window.getComputedStyle(document.documentElement).fontSize);localStorage.setItem("baseFontSize",c)}const savedFontSize=localStorage.getItem("baseFontSize");savedFontSize&&(document.documentElement.style.fontSize=savedFontSize+"px"),document.getElementById("zoom-in").addEventListener("click",function(){adjustZoom(!0)}),document.getElementById("zoom-out").addEventListener("click",function(){adjustZoom(!1)});const scrollTransition=50,header=document.querySelector("header"),toTop=document.getElementById("toTop");function goToTop(){window.scrollTo(0,0)}function handleScroll(){window.scrollY>50?header.classList.add("scrolled-down"):header.classList.remove("scrolled-down"),document.body.scrollTop>50*7||document.documentElement.scrollTop>50*7?(toTop.style.opacity="0.4",toTop.style.pointerEvents="auto"):(toTop.style.opacity="0",toTop.style.pointerEvents="none")}function updateURLOnScroll(){const e=document.querySelectorAll("article");let o,n;if(e.forEach(t=>{const c=t.getBoundingClientRect();if(c.top<=window.innerHeight/2&&c.bottom>=window.innerHeight/2){o=t;const i=t.querySelectorAll(".section-title");for(let l=i.length-1;l>=0;l--){const s=i[l];if(s.getBoundingClientRect().top<=window.innerHeight/2){n=s;break}}}}),o){let t=o.id;n&&(t+=`/${n.id}`),t!==lastUpdatedPath&&(history.replaceState(null,"",`/${t}`),lastUpdatedPath=t)}}["scroll","touchmove","resize"].forEach(e=>window.addEventListener(e,throttle(()=>{updateURLOnScroll(),handleScroll()},500)));let isInitialLoad=!0,lastUpdatedPath="";const path=window.location.pathname.substring(1),hash=window.location.hash.substring(1),articles=document.querySelectorAll("article"),welcome=document.getElementById("welcome"),observer=new IntersectionObserver(function(t,o){t.forEach(function(e){e.isIntersecting&&(e.target.querySelector(".article-content").style.display="block",o.unobserve(e.target))})});if(articles.forEach(function(t){observer.observe(t),t.querySelector(".article-content").style.display="none"}),path){const[t,o]=path.split("/");t&&document.getElementById(t)?showSingleArticle(t,o):showAllArticles()}else hash?handleHashNavigation(hash):showAllArticles();window.onpopstate=function(t){t.state&&t.state.articleId?showSingleArticle(t.state.articleId,t.state.sectionId):showAllArticles()};function showSingleArticle(t,o){articles.forEach(function(e){if(e.id===t){welcome.style.display="none",e.style.display="block";const l=e.querySelector(".article-content");l&&(l.style.display="block");const s=e.querySelector(".article-nav");if(s){let i=e.querySelector(".article-nav-bottom");i||(i=s.cloneNode(!0),i.classList.add("article-nav-bottom"),e.appendChild(i))}if(o){const i=e.querySelector(`.section-title#${o}`);i&&navigateToElement(i,!0)}else navigateToElement(e,!1);let n=`/${t}`;o&&(n+=`/${o}`),history.replaceState({articleId:t,sectionId:o},"",n)}else e.style.display="none"})}function showAllArticles(){articles.forEach(function(t,o){t.style.display="block",o!==0&&(t.querySelector(".article-content").style.display="none"),observer.observe(t);const e=t.querySelector(".article-nav-bottom");e&&e.remove()}),welcome.style.display="block",header.classList.remove("scrolled-down"),goToTop()}function navigateToElement(t,o=!1){if(o&&isInitialLoad)t.closest("article").scrollIntoView({block:"center"}),setTimeout(()=>{let l=t.getBoundingClientRect().top+window.scrollY;setTimeout(()=>{l=(t.getBoundingClientRect().top+t.getBoundingClientRect().bottom)/2+window.scrollY-window.innerHeight*.15,window.scrollBy({top:l-window.scrollY}),isInitialLoad=!1},200)},200);else if(isInitialLoad){let e=t.getBoundingClientRect().top+window.scrollY-window.innerHeight*.1;window.scrollTo({top:e}),isInitialLoad=!1}else{let e=t.getBoundingClientRect().top+window.scrollY-window.innerHeight*.2;window.scrollTo({top:e})}}function navigate(t){if(t.startsWith("#"))handleHashNavigation(t.substring(1));else{const[o,e]=t.split("/");o?showSingleArticle(o,e):(showAllArticles(),history.replaceState({},"",window.location.origin))}}function handleHashNavigation(t){if(t==="now-playing"||!document.getElementById(t))showAllArticles(),history.replaceState(null,"",window.location.pathname);else{const[o,e]=t.split("/");showSingleArticle(o,e)}}function handleLinks(t){const o=t.target.closest("a");if(o){const e=o.getAttribute("href");if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("//")){o.setAttribute("target","_blank"),o.setAttribute("rel","noreferrer");return}t.preventDefault(),navigate(e.substring(1))}}document.addEventListener("click",handleLinks),window.addEventListener("hashchange",()=>{const t=window.location.hash.substring(1);handleHashNavigation(t)});class SimpleToggle extends HTMLElement{constructor(){super(),this.button=document.createElement("button"),this.button.textContent="Show",this.button.className="showHideButton",this.button.onclick=()=>this.toggleContent(),this.content=document.createElement("div"),this.content.style.display="none",this.template=document.createElement("template"),this.template.innerHTML=this.getAttribute("c"),this.append(this.button,this.content)}toggleContent(){this.content.style.display==="none"?(this.content.appendChild(this.template.content.cloneNode(!0)),this.content.style.display="block",this.button.textContent="Hide"):(this.content.innerHTML="",this.content.style.display="none",this.button.textContent="Show")}}customElements.define("s-t",SimpleToggle);function openOverlay(e){var o=document.getElementById("fullScreenOverlay"),n=document.getElementById("overlayImage");o.style.display="block",n.src=e,document.body.style.overflow="hidden",document.addEventListener("keydown",closeOverlay)}function closeOverlay(){var e=document.getElementById("fullScreenOverlay");e.style.display="none",document.body.style.overflow="auto",document.removeEventListener("keydown",closeOverlay)}var images=document.querySelectorAll("img:not(.img-footer,.img-header,.to-top,.no-overlay)");images.forEach(function(e){e.addEventListener("click",function(){openOverlay(this.src)})});if(!isMobile){let r=function(){return Math.random()<.5?Math.floor(Math.random()*-270)-45:Math.floor(Math.random()*270)+46},i=function(){return Math.floor(Math.random()*30)+20},a=function(){return Math.floor(Math.random()*1e3)+500},w=function(e){const t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth,c=n*.5;return t.top>=-c&&t.left>=0&&t.bottom<=n+c&&t.right<=o},u=function(e,t,n=!1){let o=r(),c=o,m=100,p=100,g=100,E=100,v=100,b=100,l=0,y=i(),T=performance.now(),s=!0;function W(){s&&(e.style.filter=` hue-rotate(${o}deg) saturate(${m}%) contrast(${g}%) brightness(${v}%) ${n?"drop-shadow(0 0 1em rgba(255, 255, 255, 0.5))":""} `)}function S(A){if(s){if(isWindowActive&&w(e)){const $=A-T;T=A,l+=$/(t*y),l>=1&&(c+=r(),p=Math.random()*35+90,E=Math.random()*(n?90:40)+80,b=Math.random()*(n?50:20)+(n?85:90),l=0,y=i());const d=easeWithNoise(l);o+=(c-o)*d,m+=(p-m)*d,g+=(E-g)*d,v+=(b-v)*d,W()}s&&requestAnimationFrame(S)}}return requestAnimationFrame(S),()=>{s=!1,e.style.filter="none"}},f=function(e,t){t&&t(),e.style.filter="none"};var getRandomDegree=r,getNewIntervalsTillNextChange=i,getRandomInterval=a,isElementInViewport=w,startShift=u,handleDisengage=f;const h=document.querySelectorAll("button, a, a.dark-mode, footer, .article-nav-bottom, #site-nav a, .section-nav a");document.querySelectorAll("header, #site-nav .col, .section-nav .col, .article-header, footer, .article-title, #site-title, #toolbar").forEach(e=>{e.animateFunction=throttle(()=>u(e,a()),30)()}),h.forEach(e=>{let t,n;e.addEventListener("mouseover",throttle(()=>{t&&t(),t=u(e,a(),!0)},30)),e.addEventListener("click",()=>{t&&t(),t=u(e,a(),!0)}),e.addEventListener("touchstart",()=>{t&&t(),t=u(e,a(),!0),n=setTimeout(()=>f(e,t),888)}),e.addEventListener("mouseout",debounce(()=>{f(e,t)},30))})}function debounce(h,M){let r;return function(...i){clearTimeout(r),r=setTimeout(()=>{h.apply(this,i)},M)}}function search(){const e=document.getElementById("searchInput").value.toLowerCase(),d=document.querySelectorAll("article"),t=document.getElementById("searchResults");if(t.innerHTML="",e.length===0){t.innerHTML="<p>Enter a search term</p>",t.style.display="block";return}else if(e.length<3){t.style.display="none";return}t.style.display="block";let r=!1;if(d.forEach(function(n){const s=n.textContent.toLowerCase(),c=n.id||"",o=n.querySelector("h1, h2, h3"),u=o?o.textContent:"Untitled Article";if(s.includes(e)){r=!0;const a=s.indexOf(e),i=Math.max(0,a-50),h=Math.min(s.length,a+e.length+50),y=s.substring(i,h).replace(new RegExp(e,"gi"),p=>`<strong>${p}</strong>`),l=document.createElement("div");l.classList.add("search-result");const m=`${c}`;l.innerHTML=` <h3>${c?`<a href="/${m}" class="search-result-link">`:""}${u}${c?"</a>":""}</h3> <p>...${y}...</p> `,t.appendChild(l)}}),t.querySelectorAll(".search-result-link").forEach(n=>{n.addEventListener("click",function(s){closeSearchOverlay()})}),!r){const n=document.createElement("p");n.textContent="No results found.",t.appendChild(n)}}function openSearchOverlay(){document.getElementById("searchOverlay").style.display="block",document.getElementById("searchInput").focus(),document.body.style.overflow="hidden",document.addEventListener("keydown",handleKeyPress),search()}function closeSearchOverlay(){document.getElementById("searchOverlay").style.display="none",document.body.style.overflow="auto",document.removeEventListener("keydown",handleKeyPress),document.getElementById("searchInput").value="",document.getElementById("searchResults").innerHTML=""}function handleKeyPress(e){e.key==="Escape"&&closeSearchOverlay()}document.getElementById("search").addEventListener("click",function(e){e.preventDefault(),openSearchOverlay()}),document.getElementById("searchInput").addEventListener("input",throttle(function(){search()},500));
