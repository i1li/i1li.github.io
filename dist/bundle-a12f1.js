// Hello and God bless! Christ is King! https://github.com/i1li/i
document.body.style.overflow="hidden";const welcomeDuration=3700,delayOtherResources=welcomeDuration-200,delayOtherResources2=welcomeDuration-100,frameDuration=50,totalFrames=Math.ceil(welcomeDuration/frameDuration),scrollbarIntroFrame=Math.floor(totalFrames*.7),easingCurve=new Float32Array(totalFrames);for(let e=0;e<totalFrames;e++){const t=e/totalFrames,o=t===0?0:Math.pow(2,10*t-10);easingCurve[e]=1-o}const welcomeOverlay=document.getElementById("welcome-overlay");let currentFrame=0;const intervalId=setInterval(()=>{currentFrame++,currentFrame<=totalFrames&&(welcomeOverlay.style.opacity=easingCurve[currentFrame-1].toFixed(3)),currentFrame>=scrollbarIntroFrame&&(document.body.style.overflow="auto"),currentFrame>=totalFrames&&(clearInterval(intervalId),welcomeOverlay.style.display="none")},frameDuration);const isMobile=window.matchMedia("(orientation: portrait)").matches||window.innerHeight>window.innerWidth||/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|windows phone|kindle|playbook|silk|mobile|tablet|samsung|lg|htc|nokia|motorola|symbian|fennec|maemo|tizen|blazer|series60|ucbrowser|bada|micromessenger|webview/.test(navigator.userAgent.toLowerCase());function debounce(e,t){let o;return function(...n){clearTimeout(o),o=setTimeout(()=>{e.apply(this,n)},t)}}function throttle(e,t){let o,n;return function(){const s=this,l=arguments;n?(clearTimeout(o),o=setTimeout(function(){Date.now()-n>=t&&(e.apply(s,l),n=Date.now())},Math.max(0,t-(Date.now()-n)))):(e.apply(s,l),n=Date.now())}}let isWindowActive=!document.hidden,lastUpdateTime=performance.now();const updateWindowStatus=throttle(()=>{const e=isWindowActive;isWindowActive=!document.hidden||document.hasFocus(),isWindowActive&&!e&&(lastUpdateTime=performance.now())},500);window.addEventListener("focus",updateWindowStatus),window.addEventListener("blur",updateWindowStatus),document.addEventListener("visibilitychange",updateWindowStatus);function shuffle(e,t=1/0){if(e.length===1)return e;if(e.length<Math.min(t*2,e.length)){const o=[],n=new Set;for(;n.size<Math.min(t,e.length);){const s=Math.floor(Math.random()*e.length);n.add(s)}for(const s of n)o.push(e[s]);return o}else{for(let o=e.length-1;o>0;o--){const n=Math.floor(Math.random()*(o+1));[e[o],e[n]]=[e[n],e[o]]}return e.slice(0,Math.min(t,e.length))}}let imgOverlay=document.getElementById("fullScreenOverlay");function openImageOverlay(e){let t=document.getElementById("overlayImage");imgOverlay.style.display="block",t.src=e,document.body.style.overflow="hidden",document.addEventListener("keydown",closeImageOverlay)}function closeImageOverlay(){imgOverlay.style.display="none",document.body.style.overflow="auto",document.removeEventListener("keydown",closeImageOverlay)}document.addEventListener("DOMContentLoaded",function(){const e=localStorage.getItem("baseFontSize");e&&(document.documentElement.style.fontSize=e+"px")});function pageZoom(e){const t=e?1.05:.95;document.querySelectorAll("html").forEach(function(s){let l=parseFloat(window.getComputedStyle(s).fontSize);l=l*t,s.style.fontSize=l+"px"});const n=parseFloat(window.getComputedStyle(document.documentElement).fontSize);localStorage.setItem("baseFontSize",n)}function applyDarkMode(e){document.body.classList.toggle("dark-mode",e),document.querySelectorAll("*").forEach(t=>{t.classList.toggle("dark-mode",e)})}let darkMode;function toggleDarkMode(){darkMode=!darkMode,applyDarkMode(darkMode),localStorage.setItem("darkMode",darkMode)}document.addEventListener("DOMContentLoaded",function(){const e=localStorage.getItem("darkMode");e!==null?darkMode=e==="true":window.matchMedia("(prefers-color-scheme: dark)").matches?darkMode=!0:window.matchMedia("(prefers-color-scheme: light)").matches?darkMode=!1:darkMode=!0,applyDarkMode(darkMode)});class SimpleToggle extends HTMLElement{constructor(){super(),this.button=document.createElement("button"),this.button.textContent="\u25B6\uFE0F Play",this.button.title="Play Content",this.button.className="showHideButton",this.button.onclick=()=>this.toggleContent(),this.content=document.createElement("div"),this.content.style.display="none",this.template=document.createElement("template"),this.template.innerHTML=this.getAttribute("c"),this.append(this.button,this.content)}toggleContent(){this.content.style.display==="none"?(this.content.appendChild(this.template.content.cloneNode(!0)),this.content.style.display="block",this.button.textContent="\u23F9\uFE0F Stop",this.button.title="Stop Content"):(this.content.innerHTML="",this.content.style.display="none",this.button.textContent="\u25B6\uFE0F Play",this.button.title="Play Content")}}customElements.define("s-t",SimpleToggle);function searchSPA(){const e=document.getElementById("searchInput").value.toLowerCase().trim(),t=document.getElementById("searchResults");if(t.innerHTML="",!e){t.innerHTML="<p>Enter a search term</p>",t.style.display="block";return}if(e.length<3){t.style.display="none";return}t.style.display="block";let o=!1;document.querySelectorAll("article").forEach(n=>{const s=n.cloneNode(!0);s.querySelectorAll("button").forEach(i=>i.remove()),s.querySelectorAll("nav").forEach(i=>i.remove());const l=s.textContent.toLowerCase();if(!l.includes(e))return;o=!0;const a=n.querySelector("h1,h2,h3")?.textContent||"Untitled Article",c=n.id||"",d=l.indexOf(e),r=l.slice(Math.max(0,d-50),d+e.length+50).replace(new RegExp(e,"gi"),i=>`<strong>${i}</strong>`);t.insertAdjacentHTML("beforeend",` <div class="search-result"> <h3>${c?`<a href="/${c}" class="search-result-link">`:""}${a}${c?"</a>":""}</h3> <p>...${r}...</p> </div> `)}),t.querySelectorAll(".search-result-link").forEach(n=>n.addEventListener("click",closeSearchOverlay)),o||(t.innerHTML="<p>No results found.</p>")}function handleKeyPress(e){e.key==="Escape"&&closeSearchOverlay()}function openSearchOverlay(){document.getElementById("searchOverlay").style.display="block",document.getElementById("searchInput").focus(),document.body.style.overflow="hidden",document.addEventListener("keydown",handleKeyPress),searchSPA()}function closeSearchOverlay(){document.getElementById("searchOverlay").style.display="none",document.body.style.overflow="auto",document.removeEventListener("keydown",handleKeyPress),document.getElementById("searchInput").value="",document.getElementById("searchResults").innerHTML=""}document.getElementById("searchInput").addEventListener("input",throttle(()=>search(),500));const random=(t,o)=>Math.random()*(o-t)+t,easeInOut=t=>t<.5?2*t*t:-1+(4-2*t)*t,easingFunctions=[t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,t=>t<.5?2*t*t:-1+(4-2*t)*t,t=>t<.5?(1-Math.sqrt(1-4*t*t))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,t=>-(Math.cos(Math.PI*t)-1)/2,t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,t=>{const o=2*Math.PI/4.5;return t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((t*2-1.075)*o))/2:Math.pow(2,-20*t+10)*Math.sin((t*2-.075)*o)/2+1}],noiseFunctions=[t=>perlinNoise(t),t=>Math.sin(t*10)*.5+.5,t=>Math.exp(-Math.pow(t-.5,2)/.05),t=>Math.pow(Math.sin(t*Math.PI),3)];function metaRecursiveEaseNoise(t,o=0,n=Math.ceil(Math.random()*300)+33){if(o>=n){const i=easingFunctions[Math.floor(Math.random()*easingFunctions.length)];return i(t)}const e=easingFunctions[Math.floor(Math.random()*easingFunctions.length)],s=noiseFunctions[Math.floor(Math.random()*noiseFunctions.length)],l=Math.random(),h=l/random(1.5,2.5),r=e(t),a=metaRecursiveNoise(t*l,o+1,n,s)*h;return Math.max(0,Math.min(1,r+a))}function fade(t){return t*t*t*(t*(t*6-15)+10)}function lerp(t,o,n){return o+t*(n-o)}function grad(t,o){const n=t&15,e=1+(n&7);return(n&8?-e:e)*o}function metaRecursiveNoise(t,o=0,n=random(33,111),e){if(o>=n)return e(t);const s=Math.floor(t)&255;t-=Math.floor(t);const l=metaRecursiveEaseNoise(fade(t),o+1,n);return lerp(l,grad(p[s],t),grad(p[s+1],t-1))}const F2=.5*(Math.sqrt(3)-1),G2=(3-Math.sqrt(3))/6,grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]];class SimplexNoise{constructor(o=Math.random()){this.p=new Uint8Array(256);for(let n=0;n<256;n++)this.p[n]=Math.floor(o*256),o=(o*9301+49297)%233280/233280;this.perm=new Uint8Array(512);for(let n=0;n<512;n++)this.perm[n]=this.p[n&255]}dot(o,n,e){return o[0]*n+o[1]*e}noise(o,n){o=Math.round(o*1e3)/1e3,n=Math.round(n*1e3)/1e3;let e,s,l,h=(o+n)*F2,r=Math.floor(o+h),a=Math.floor(n+h),i=(r+a)*G2,f=r-i,g=a-i,c=o-f,M=n-g,u,m;c>M?(u=1,m=0):(u=0,m=1);let d=c-u+G2,q=M-m+G2,y=c-1+2*G2,X=M-1+2*G2,I=r&255,N=a&255,w=this.perm,A=w[I+w[N]]%12,b=w[I+u+w[N+m]]%12,E=w[I+1+w[N+1]]%12,Y=.5-c*c-M*M;e=Y<0?0:(Y*Y)**2*this.dot(grad3[A],c,M);let j=.5-d*d-q*q;s=j<0?0:(j*j)**2*this.dot(grad3[b],d,q);let v=.5-y*y-X*X;return l=v<0?0:(v*v)**2*this.dot(grad3[E],y,X),70*(e+s+l)}}const permutation=[...Array(256)].map(()=>Math.floor(Math.random()*256)),p=[...permutation,...permutation];function perlinNoise(t){const o=Math.floor(t)&255;t-=Math.floor(t);const n=fade(t);return lerp(n,grad(p[o],t),grad(p[o+1],t-1))}function fbm(t,o,n,e=4,s=.5,l=2){let h=0,r=1,a=1,i=0;for(let f=0;f<e;f++)h+=r*t.noise(o*a,n*a),i+=r,r*=s,a*=l;return h/i}function turbulence(t,o,n,e=4){let s=0,l=1,h=o,r=n;for(let a=0;a<e;a++)s+=l*Math.abs(t.noise(h,r)),h*=2,r*=2,l*=.5;return s}function worley(t,o,n=4){const e=Math.floor(t*n),s=Math.floor(o*n),l=t*n-e,h=o*n-s;let r=1/0;for(let a=-1;a<=1;a++)for(let i=-1;i<=1;i++){const f=e+a,g=s+i,c=Math.sin(f*73.156+g*94.673)*43758.5453,M=Math.sin(f*45.164+g*94.673)*43758.5453,u=c-Math.floor(c)+a-l,m=M-Math.floor(M)+i-h,d=Math.sqrt(u*u+m*m);d<r&&(r=d)}return Math.min(1,r)}const canvas=document.getElementById("canvas");canvas.style.willChange="transform";const ctx=canvas.getContext("2d",{alpha:!0,willReadFrequently:!1,desynchronized:!0}),bufferCanvas=document.createElement("canvas");bufferCanvas.style.willChange="transform";const bufferCtx=bufferCanvas.getContext("2d",{alpha:!0,willReadFrequently:!1,desynchronized:!0});let width,height;function resizeCanvas(){width=canvas.width=bufferCanvas.width=window.innerWidth,height=canvas.height=bufferCanvas.height=window.innerHeight,canvas.style.width=window.innerWidth+"px",canvas.style.height=window.innerHeight+"px"}window.addEventListener("resize",resizeCanvas),resizeCanvas();const shapes=[],SHAPE_COUNT=12,BASE_SIZE=.006,BASE_SIZE_MULTIPLIER=12,BLUR_AMOUNT=3,SHADOW_SCALES=[1.3,1.9,3,4.1];let lastFrameTime=0;const ACCUMULATOR_THRESHOLD=1/60,noise=new SimplexNoise(Math.random()),noiseGenerators=[{name:"simplex",generate:(n,t,o)=>noise.noise(n,t)},{name:"fbm",generate:(n,t,o)=>fbm(noise,n,t,3)},{name:"turbulence",generate:(n,t,o)=>turbulence(noise,n,t,3)},{name:"worley",generate:(n,t,o)=>worley(n,t,4)}];function getNoiseValue(n,t,o,d){try{return n.generate(t,o,d)}catch{return noise.noise(t,o)}}let lastNoiseTime=0;const NOISE_UPDATE_INTERVAL=isMobile?32:16;function createAndChangeShapes(n,t){if(typeof isWindowActive<"u"&&!isWindowActive)return;const o=t*5e-6,d=t-lastNoiseTime>=NOISE_UPDATE_INTERVAL;shapes.forEach(e=>{if(d){const v=o*3,h=e.x,M=e.y,S=(getNoiseValue(e.noiseGeneratorX,h*.0015,o,o)*.15+noise.noise(h*.007,v)*.05)*e.noiseInfluenceX,X=(getNoiseValue(e.noiseGeneratorY,M*.0015,o,o)*.15+noise.noise(M*.007,v)*.05)*e.noiseInfluenceY,N=n*.7;e.vx+=(S-e.vx)*N,e.vy+=(X-e.vy)*N}const u=n*40*e.speedMultiplier;e.x+=e.vx*u,e.y+=e.vy*u,e.rotation+=e.rotationSpeed*n*.6;const a=10;e.x-a<0?(e.x=a,e.vx=Math.abs(e.vx)):e.x+a>width&&(e.x=width-a,e.vx=-Math.abs(e.vx)),e.y-a<0?(e.y=a,e.vy=Math.abs(e.vy)):e.y+a>height&&(e.y=height-a,e.vy=-Math.abs(e.vy));const l=o*.3,f=noise.noise(e.slantNoiseOffsetX+e.x*.002,l)*.5+.5,r=noise.noise(e.slantNoiseOffsetY+e.y*.002,l)*.5+.5,s=noise.noise(e.skewNoiseOffsetX+e.x*.002,l)*.5+.5,i=noise.noise(e.skewNoiseOffsetY+e.y*.002,l)*.5+.5;e.slantX=easeInOut(f),e.slantY=easeInOut(r),e.skewX=easeInOut(s),e.skewY=easeInOut(i);const c=typeof metaRecursiveEaseNoise<"u"?metaRecursiveEaseNoise(Math.sin(o*1.5+e.hueShift)):Math.sin(o*1.5+e.hueShift);e.hue=(e.hue+c*180)%360;const m=.15+.1*Math.sin(o+e.alphaShift),y=noise.noise(e.x*.005,e.y*.005+o)*.05;e.alpha=Math.min(Math.max(.07,m+y),.3),e.scale=.8+noise.noise(e.x*.005,e.y*.005+o*.5)*.7}),d&&(lastNoiseTime=t)}function precomputeShapeColors(n){n.color1=`hsla(${n.hue}, 80%, 60%, 0.6)`,n.color2=`hsla(${(n.hue+140)%360}, 90%, 40%, 0.8)`,n.shadowColors=SHADOW_SCALES.map((t,o)=>`hsla(${(n.hue+o*40)%360}, 70%, 50%, ${.04+o*.02})`)}function drawShapes(n){shapes.forEach(t=>{n.save(),n.translate(t.x,t.y),n.transform(1+t.skewX*1.5,t.slantY*1.5,t.slantX*1.5,1+t.skewY*1.5,0,0),n.rotate(t.rotation),n.scale(t.scale,t.scale);const o=t.vertices,d=t.roundedCorners;let e=1/0,u=1/0,a=-1/0,l=-1/0;for(let r=0;r<o.length;r+=2){const s=o[r],i=o[r+1];s<e&&(e=s),s>a&&(a=s),i<u&&(u=i),i>l&&(l=i)}function f(r){const s=n.createLinearGradient(r?a:e,r?l:u,r?e:a,r?u:l),i=t.color1,c=t.color2;return s.addColorStop(0,r?c:i),s.addColorStop(.15,r?c:i),s.addColorStop(.8,r?i:c),s.addColorStop(1,r?i:c),s}SHADOW_SCALES.forEach((r,s)=>{n.save(),n.scale(r,r),n.beginPath(),n.moveTo(o[0],o[1]);for(let i=0;i<o.length;i+=2){const c=o[i],m=o[i+1],y=o[(i+2)%o.length],w=o[(i+3)%o.length];if(d[i/2]){const g=(c+y)/2,v=(m+w)/2;n.quadraticCurveTo(c,m,g,v)}else n.lineTo(y,w)}n.closePath(),n.fillStyle=t.shadowColors[s],n.fill(),n.restore()}),n.beginPath(),n.moveTo(o[0],o[1]);for(let r=0;r<o.length;r+=2){const s=o[r],i=o[r+1],c=o[(r+2)%o.length],m=o[(r+3)%o.length];if(d[r/2]){const y=(s+c)/2,w=(i+m)/2;n.quadraticCurveTo(s,i,y,w)}else n.lineTo(c,m)}n.closePath(),n.fillStyle=f(SHADOW_SCALES.length%2===0),n.globalAlpha=t.alpha,n.shadowColor=`hsla(${t.hue}, 100%, 80%, 0.3)`,n.shadowBlur=9,n.fill(),n.restore()})}let accumulator=0;function animateShapes(n){const t=(n-lastFrameTime)/1e3||.016;for(lastFrameTime=n,accumulator+=t;accumulator>=ACCUMULATOR_THRESHOLD;)createAndChangeShapes(ACCUMULATOR_THRESHOLD,n),accumulator-=ACCUMULATOR_THRESHOLD;bufferCtx.clearRect(0,0,width,height),drawShapes(bufferCtx),ctx.clearRect(0,0,width,height),ctx.filter=`blur(${BLUR_AMOUNT}px)`,ctx.drawImage(bufferCanvas,0,0),ctx.filter="none",requestAnimationFrame(animateShapes)}for(let n=0;n<SHAPE_COUNT;n++){const t=Math.min(width,height)*random(BASE_SIZE,BASE_SIZE*BASE_SIZE_MULTIPLIER),o=Math.floor(random(33,44)),d=new Float32Array(o*2),e=new Array(o).fill(!1);for(let f=0;f<o;f++){const r=f/o*Math.PI*random(-99,99),s=t*random(.01,6);d[f*2]=Math.cos(r)*s,d[f*2+1]=Math.sin(r)*s,Math.random()<.85&&(e[f]=!0)}const u=noiseGenerators[Math.floor(Math.random()*noiseGenerators.length)],a=noiseGenerators[Math.floor(Math.random()*noiseGenerators.length)],l={vertices:d,roundedCorners:e,hue:random(0,360),alpha:random(.05,.25),x:random(0,width),y:random(0,height),vx:random(-1,1),vy:random(-1,1),speedMultiplier:random(.8,1.2),rotation:random(0,Math.PI*2),rotationSpeed:random(-.33,.33),hueShift:random(0,Math.PI*2),alphaShift:random(0,Math.PI*2),scale:1,slantX:0,slantY:0,skewX:0,skewY:0,slantNoiseOffsetX:random(-1e5,1e5),slantNoiseOffsetY:random(-1e5,1e5),skewNoiseOffsetX:random(-1e5,1e5),skewNoiseOffsetY:random(-1e5,1e5),noiseGeneratorX:u,noiseGeneratorY:a,noiseInfluenceX:typeof metaRecursiveEaseNoise<"u"?metaRecursiveEaseNoise(Math.random()):Math.random(),noiseInfluenceY:typeof metaRecursiveEaseNoise<"u"?metaRecursiveEaseNoise(Math.random()):Math.random()};precomputeShapeColors(l),shapes.push(l)}animateShapes(0);class YTEmbed extends HTMLElement{static get observedAttributes(){return["v"]}constructor(){super(),this.throttledCheckViewport=this.checkViewport.bind(this),this.throttledCheckViewport=throttle(this.throttledCheckViewport,500),this.link=document.createElement("a"),this.link.title="View video in new tab",this.link.target="_blank",this.link.rel="noreferrer",this.button=document.createElement("button"),this.button.title="Play Video",this.button.className="showHideButton",this.initFromV()}attributeChangedCallback(t,e,o){t==="v"&&e!==o&&this.initFromV()}isPlaylistID(t){return t.length>11&&(t.startsWith("PL")||t.startsWith("TL")||t.startsWith("OL")||t.startsWith("FL")||t.startsWith("UU"))}initFromV(){const t=this.getAttribute("v");if(!t)return;const[e,o]=t.split("?");this.id=e,this.params=o;const n=this.id.split(",");this.videoIds=n;let i,s;if(this.classList.contains("no-link-embed"))switch(!0){default:i=`https://www.youtube.com/watch?v=${this.id}${this.params?"&"+this.params+"&":"&"}autoplay=1`,s=`https://www.youtube-nocookie.com/embed/${this.id}${this.params?"?"+this.params+"&":"?"}autoplay=1`;break;case this.videoIds.length>1:i=`https://www.youtube.com/watch_videos?video_ids=${this.videoIds.join(",")}&autoplay=1`,s=`https://www.youtube-nocookie.com/embed/?playlist=${this.videoIds.join(",")}&autoplay=1`;break;case this.isPlaylistID(this.id):i=`https://www.youtube.com/playlist?list=${this.id}&autoplay=1`,s=`https://www.youtube-nocookie.com/embed/videoseries?list=${this.id}&autoplay=1`;break}else if(this.classList.contains("no-embed"))switch(!0){default:i=`https://www.youtube.com/watch?v=${this.id}${this.params?"&"+this.params+"&":"&"}autoplay=1`,s=null;break;case this.videoIds.length>1:i=`https://www.youtube.com/watch_videos?video_ids=${this.videoIds.join(",")}&autoplay=1`,s=null;break;case this.isPlaylistID(this.id):i=`https://www.youtube.com/playlist?list=${this.id}&autoplay=1`,s=null;break}else switch(!0){default:i=`https://www.youtube-nocookie.com/embed/${this.id}${this.params?"?"+this.params+"&":"?"}autoplay=1`,s=i;break;case this.videoIds.length>1:i=`https://www.youtube-nocookie.com/embed/?playlist=${this.videoIds.join(",")}&autoplay=1`,s=i;break;case this.isPlaylistID(this.id):i=`https://www.youtube-nocookie.com/embed/videoseries?list=${this.id}&autoplay=1`,s=i;break}this.linkUrl=i,this.embedUrl=s,this.link.href=this.linkUrl,this.link.textContent=this.getAttribute("t")||"View Video",this.button.textContent="\u25B6\uFE0F Play",this.classList.contains("no-embed")?(this.button.onclick=()=>window.open(this.linkUrl),this.appendChild(this.button),this.appendChild(this.link)):(this.button.onclick=()=>this.toggleVideo(),this.wrapper=document.createElement("div"),this.wrapper.className="yt-wrapper",this.appendChild(this.button),this.appendChild(this.link),this.appendChild(this.wrapper))}toggleVideo(){const t=this.wrapper.querySelector("iframe");if(t)this.wrapper.removeChild(t),this.wrapper.style.display="none",this.button.textContent="\u25B6\uFE0F Play",this.button.title="Play Video",this.removeAttribute("data-now-playing"),this.removeAttribute("data-video-path"),this.removeRemoteControl();else{this.closeOtherVideos();const e=document.createElement("iframe");e.src=this.embedUrl,e.allowFullscreen=!0,e.className="yt",this.wrapper.appendChild(e),this.wrapper.style.display="block",this.button.textContent="\u23F9\uFE0F Stop",this.button.title="Stop Video",this.setAttribute("data-now-playing","true");const o=this.closest("article"),n=this.closest("section");let i="/";o&&(i+=o.id,n&&(i+=`/${n.id}`)),this.setAttribute("data-video-path",i),this.createRemoteControl(),this.setupViewportCheck()}}closeOtherVideos(){document.querySelectorAll("y-t[data-now-playing]").forEach(t=>{t!==this&&t.button.click()})}createRemoteControl(){let t=document.getElementById("remote-control");if(!t){t=document.createElement("div"),t.id="remote-control",t.style.display="none",document.body.appendChild(t);const n=document.createElement("div");n.id="now-playing-text",n.innerHTML="\u{1F50A}Now<br>Playing:",n.style.display="none",document.body.appendChild(n);const i=document.createElement("div");i.id="expand-icon",i.setAttribute("aria-label","Expand Remote Control"),i.style.display="block",document.body.appendChild(i);const s=()=>{t.style.display="block",i.style.display="none",n.style.display="none"};i.onclick=s,i.onmouseenter=s,t.onmouseleave=()=>{this.isOutOfViewport()&&(t.style.display="none",i.style.display="block",n.style.display="block")}}t.innerHTML="";const e=this.button.cloneNode(!0);e.style="",e.style.display="block",e.onclick=()=>this.toggleVideo();const o=document.createElement("a");o.textContent="Go to video",o.style.display="block",o.onclick=n=>{n.preventDefault(),this.navigateToNowPlaying()},this.updateNowPlayingLink(o),t.appendChild(e),t.appendChild(o),this.checkViewport()}checkViewport(){const t=document.getElementById("remote-control"),e=document.getElementById("expand-icon"),o=document.getElementById("now-playing-text");this.isOutOfViewport()?(t&&(t.style.display="none"),e&&(e.style.display="block"),o&&(o.style.display="block")):(t&&(t.style.display="none"),e&&(e.style.display="none"),o&&(o.style.display="none"))}setupViewportCheck(){["scroll","touchmove","resize"].forEach(t=>window.addEventListener(t,this.throttledCheckViewport)),this.checkViewport()}isOutOfViewport(){const t=this.getBoundingClientRect();return t.bottom<=0||t.right<=0||t.left>=window.innerWidth||t.top>=window.innerHeight}updateNowPlayingLink(t){const e=this.getAttribute("data-video-path");e&&(t.href=`${e}#now-playing`)}navigateToNowPlaying(){const t=document.querySelector("y-t[data-now-playing]");if(t){const e=t.getAttribute("data-video-path");e&&(navigateSPA(e.substring(1)),setTimeout(()=>{const o=t.getBoundingClientRect().top+window.pageYOffset-window.innerHeight*.1;window.scrollTo({top:o,behavior:"smooth"})},20))}}removeEventListeners(){["scroll","touchmove","resize"].forEach(t=>window.removeEventListener(t,this.throttledCheckViewport))}removeRemoteControl(){const t=document.getElementById("remote-control");t&&document.body.removeChild(t);const e=document.getElementById("expand-icon");e&&document.body.removeChild(e);const o=document.getElementById("now-playing-text");o&&document.body.removeChild(o),this.removeEventListeners()}}customElements.define("y-t",YTEmbed);const shuffleDiv=document.getElementById("shuffle"),shuffleDivElements=[...shuffleDiv.querySelectorAll("y-t")];let combinedElements=[],elementIdsMap=new Map;function processAndCombine(l,t){if(processedElements.has(t))return;const e=l.getAttribute("v");let o=elementIdsMap.get(t)||e.split(",");elementIdsMap.has(t)||elementIdsMap.set(t,o),shuffle(o,3).forEach(s=>combinedElements.push(s.split("?")[0]));const i=shuffle(o,150);if(l.setAttribute("v",i.join(",")),processedElements.add(t),t<shuffleDivElements.length-1)processAndCombine(shuffleDivElements[t+1],t+1);else{const s=document.getElementById("combined-list");(s.querySelector("y-t")??s.appendChild(document.createElement("y-t"))).setAttribute("v",shuffle([...new Set(combinedElements)],150).join(","))}}let processedElements=new Set;processAndCombine(shuffleDivElements[0],0);function shuffleAndDraw(){shuffle(shuffleDivElements);let l=0,t=document.getElementById("deck");const e=shuffleDivElements[l].cloneNode(!1);processAndCombine(e,l),t.appendChild(e),document.querySelector("#next").addEventListener("click",function(){l=(l+1)%shuffleDivElements.length,t.innerHTML="";const n=shuffleDivElements[l].cloneNode(!1);processAndCombine(n,l),t.appendChild(n)})}shuffleAndDraw();if(!isMobile){let l=function(o){const[n,i]=o.split(" "),[t,s]=i.split(":");return`https://www.blb.org/csb/${n.toLowerCase().substring(0,3)}/${t}/${s}`},d=function(){const o=document.getElementById("header-verse");o.style.display="block",shuffle(r);let n=0,i=0,t=null;const s=500;function h(){const e=r[n];document.querySelectorAll(".bible-verse-text").forEach(a=>{a.textContent=e[1]}),document.querySelectorAll(".bible-verse-link").forEach(a=>{a.textContent=e[0],a.href=l(e[0])});const c=e[1].split(" ").length;i=Math.max(c*650,3300),n=(n+1)%r.length,u()}function u(){t&&clearTimeout(t);function e(){isWindowActive&&!document.querySelector("header").classList.contains("scrolled-down")?(o.style.display="block",i-=s,i<=0?h():t=setTimeout(e,s)):(o.style.display="none",t=setTimeout(e,s))}e()}h()};var constructVerseURL=l,displayRandomBibleVerse=d;document.addEventListener("DOMContentLoaded",function(){d()});const r=[["Philippians 4:7","And the peace of God, which surpasses all understanding, will guard your hearts and minds in Christ Jesus."],["Exodus 3:14","God replied to Moses, 'I AM WHO I AM. This is what you are to say to the Israelites: I AM has sent me to you.'"],["John 6:35","I am the bread of life. Whoever comes to me will never go hungry, and whoever believes in me will never be thirsty."],["John 8:12","I am the light of the world. Whoever follows me will never walk in darkness, but will have the light of life."],["John 10:9","I am the gate; whoever enters through me will be saved."],["John 11:25-26","I am the resurrection and the life. The one who believes in me will live, even though they die; and whoever lives by believing in me will never die."],["John 14:6","I am the way and the truth and the life. No one comes to the Father except through me."],["John 15:1","I am the true vine, and my Father is the gardener."],["John 8:58","Truly, truly, I say to you, before Abraham was, I am."],["Revelation 1:8","I am the Alpha and the Omega, says the Lord God, who is, and who was, and who is to come, the Almighty."],["Proverbs 3:5-6","Trust in the Lord with all your heart, and do not rely on your own understanding; in all your ways know him, and he will make your paths straight."],["2 Corinthians 5:17","Therefore, if anyone is in Christ, he is a new creation; the old has passed away, and see, the new has come!"],["Matthew 6:24","No one can serve two masters, since either he will hate one and love the other, or he will be devoted to one and despise the other. You cannot serve both God and money."],["2 Timothy 1:7","For God has not given us a spirit of fear, but of power and of love and of a sound mind."],["Romans 12:2","Do not be conformed to this age, but be transformed by the renewing of your mind, so that you may discern what is the good, pleasing, and perfect will of God."],["Proverbs 9:8-9","Do not rebuke mockers or they will hate you; rebuke the wise and they will love you. Instruct the wise and they will be wiser still; teach the righteous and they will add to their learning."],["Galatians 2:20","I have been crucified with Christ, and I no longer live, but Christ lives in me. The life I now live in the body, I live by faith in the Son of God, who loved me and gave himself for me."]]}const header=document.querySelector("header"),headerHeight=3*parseFloat(getComputedStyle(document.documentElement).fontSize),toTop=document.getElementById("toTop");function goToTop(){window.scrollTo(0,0)}let lastUpdatedPath="",isInitial=!0,historyStack=new Map,currentHistoryIndex=-1;history.scrollRestoration="manual";function scrollSPA(t,e=!1){if(t&&t.nodeType&&!(t instanceof Event)){const n=e?"instant":"smooth";t.closest("article").scrollIntoView({behavior:n});const s=e?0:headerHeight,r=t.getBoundingClientRect().top+window.scrollY-s;window.scrollTo({top:r,behavior:n});return}currentHistoryIndex>=0&&(historyStack.get(currentHistoryIndex).scrollY=window.scrollY),window.scrollY>headerHeight*.6?header.classList.add("scrolled-down"):header.classList.remove("scrolled-down"),document.body.scrollTop>window.innerHeight||document.documentElement.scrollTop>window.innerHeight?toTop.style.display="inline-block":toTop.style.display="none";const i=document.querySelectorAll("article");let l,o,c=!1;if(i.forEach(n=>{if(c)return;const s=n.getBoundingClientRect();if(s.top<=window.innerHeight/2&&s.bottom>=window.innerHeight/2){l=n;const r=n.querySelectorAll(".section-title");for(let d=r.length-1;d>=0;d--){const a=r[d];if(a.getBoundingClientRect().top<=window.innerHeight/2){o=a;break}}c=!0}}),l){let n=l.id;if(o&&(n+=`/${o?.id}`),n!==lastUpdatedPath){const s=o?o.id:void 0;historyStack.get(currentHistoryIndex).sectionId=s,historyStack.get(currentHistoryIndex).path=n,history.replaceState({historyIndex:currentHistoryIndex},"",`/${n}`),lastUpdatedPath=n}}}["scroll","touchmove","resize"].forEach(t=>window.addEventListener(t,throttle(()=>{scrollSPA(t)},150)));const articleObserver=new IntersectionObserver(t=>{t.forEach(e=>{e.isIntersecting&&(e.target.querySelector(".article-content").style.display="block",articleObserver.unobserve(e.target))})}),articles=document.querySelectorAll("article");articles.forEach(t=>{t.querySelector(".article-content").style.display="none",articleObserver.observe(t)});function showBottomNav(t){let e=t.querySelector(".article-nav-bottom");if(!e){const i=t.querySelector(".article-nav");i&&(e=i.cloneNode(!0),e.classList.add("article-nav-bottom"),t.appendChild(e))}}const welcome=document.getElementById("welcome");function showAllArticles(t=!1){articles.forEach((e,i)=>{e.style.display="block",i!==0&&(e.querySelector(".article-content").style.display="none",articleObserver.observe(e));const l=e.querySelector(".article-nav-bottom");l&&l.remove()}),welcome.style.display="block",t||goToTop()}function showArticle(t,e,i=!1,l=!1){articles.forEach(o=>{if(o.id!==t){o.style.display="none";return}o.style.display="block",welcome.style.display="none";const c=o.querySelector(".article-content");if(c&&(c.style.display="block"),showBottomNav(o),l){const s=(e?o.querySelector(`.section-title#${e}`):o).getBoundingClientRect().top+window.scrollY-headerHeight;window.scrollTo({top:s,behavior:"instant"})}else scrollSPA(e?o.querySelector(`.section-title#${e}`):o,i&&!!e)})}const initialPath=window.location.pathname.substring(1),initialHash=window.location.hash.substring(1);let initialArticleId=null,initialSectionId=null;if(initialPath){const[t,e]=initialPath.split("/");t&&document.getElementById(t)?(showArticle(t,e,!0),initialArticleId=t,initialSectionId=e):showAllArticles()}else initialHash?handleHash(initialHash):showAllArticles();currentHistoryIndex=0,historyStack.set(0,{path:initialPath,articleId:initialArticleId,sectionId:initialSectionId,scrollY:0}),history.replaceState({historyIndex:0},"",window.location.pathname),document.body.setAttribute(`data-history-${currentHistoryIndex}`,"true"),scrollSPA(),window.onpopstate=t=>{if(t.state&&t.state.historyIndex!==void 0){currentHistoryIndex=t.state.historyIndex,document.body.setAttribute(`data-history-${currentHistoryIndex}`,"true");const e=historyStack.get(currentHistoryIndex);e.articleId?showArticle(e.articleId,e.sectionId,!1,!0):(showAllArticles(!0),window.scrollTo({top:e.scrollY,behavior:"instant"}))}else showAllArticles()};function handleHash(t){t==="now-playing"||!document.getElementById(t.split("/")[0])?navigateSPA("/"):navigateSPA(t)}window.addEventListener("hashchange",()=>handleHash(window.location.hash.substring(1)));function navigateSPA(t,e){const i=t instanceof Event?t:void 0,l=i?e:t;if(i&&i.preventDefault(),l.startsWith("#")){handleHash(l.substring(1));return}const[o,c]=l.split("/"),n=l;if(n!==historyStack.get(currentHistoryIndex)?.path){currentHistoryIndex>=0&&(historyStack.get(currentHistoryIndex).scrollY=window.scrollY),currentHistoryIndex++;for(let s of Array.from(historyStack.keys()).sort((r,d)=>r-d))s>currentHistoryIndex&&historyStack.delete(s);historyStack.set(currentHistoryIndex,{path:n,articleId:o,sectionId:c,scrollY:0}),history.pushState({historyIndex:currentHistoryIndex},"",n?`/${n}`:"/"),document.body.setAttribute(`data-history-${currentHistoryIndex}`,"true"),o?showArticle(o,c,!1,!1):showAllArticles()}}const shiftLayer1=document.getElementById("shift-layer1"),shiftLayer2=document.getElementById("shift-layer2"),bg=document.getElementById("bg"),allShiftLayers=Array.from(document.querySelectorAll('[id^="shift-layer"]')),totalShiftLayers=allShiftLayers.length;function getShiftLayerInfo(r){const t=r.id.match(/shift-layer(\d+)/);return{currentLayer:t?parseInt(t[1]):null,totalLayers:totalShiftLayers}}function randomlyModifyValue(r,t=.85,i=1.15){if(Math.random()<.333){const n=Math.random()*(i-t)+t;return Math.round(r*n)}return Math.round(r)}function getRandomInRange(r,t,i=1,n){if(!n.id.startsWith("shift-layer"))return(Math.random()*(t-r)+r)*i;const{currentLayer:o}=getShiftLayerInfo(n);return o!=null?randomlyModifyValue(Math.random()*(t-r)+r)*i:(Math.random()*(t-r)+r)*i}function roundTo(r,t){const i=10**t;return Math.round(r*i)/i}function getRandomTransitionDuration(r){return Math.round(getRandomInRange(7e3,21e3,1,r))}function getRandomHueShift(r){return roundTo(getRandomInRange(-180,180,1,r),1)}function getRandomFilterValue(r){return roundTo(getRandomInRange(87,185,1,r),1)}function getRandomOpacityValue(r){return roundTo(getRandomInRange(65,95,1,r),1)}function getRandomOpacityValue2(r){return roundTo(getRandomInRange(.29,.37,1,r),3)}function getRandomGradientSteps(r){const{currentLayer:t}=getShiftLayerInfo(r);return t===1?7*Math.ceil(Math.random()*7):randomlyModifyValue(Math.ceil(Math.random()*12)+2)}function createLayerState(r){const{currentLayer:t}=getShiftLayerInfo(r);return{transitionCurrentTime:0,transitionProgress:0,transitionDuration:t===1?8e3:5e3,currentGradientSteps:getRandomGradientSteps(r),currentContrast:100,currentBrightness:100,currentSaturation:100,currentOpacity:.75,currentHueShift:0,targetGradientSteps:getRandomGradientSteps(r),targetContrast:getRandomFilterValue(r),targetBrightness:getRandomFilterValue(r),targetSaturation:getRandomFilterValue(r),targetOpacity:getRandomOpacityValue(r),targetHueShift:getRandomHueShift(r)}}function createBgLayerState(r){const t=r.id==="bg"?.33:1;return{transitionCurrentTime:0,transitionProgress:0,transitionDuration:getRandomTransitionDuration(r),currentOpacity:t,targetOpacity:getRandomOpacityValue2(r)}}let lastGradient1="",lastGradient2="";function setGradient(r,t){const{currentLayer:i}=getShiftLayerInfo(r),n=r.offsetWidth||r.clientWidth,o=r.offsetHeight||r.clientHeight,c=Math.sqrt(n**2+o**2)/(Math.max(n,o)*Math.sqrt(2))*100;let h=[];const s=t.currentGradientSteps,d=360/s;for(let u=0;u<s;u++){const g=u*d,f=50+50*Math.cos(g*Math.PI/180),y=50+50*Math.sin(g*Math.PI/180),S=u+s;h.push(`radial-gradient(ellipse farthest-corner at ${roundTo(f,1)}% ${roundTo(y,1)}%, hsl(${S*d}, 100%, 50%), transparent ${roundTo(c,1)}%)`)}const e=h.join(", ");(r.id==="shift-layer1"&&e!==lastGradient1||r.id==="shift-layer2"&&e!==lastGradient2)&&(r.style.backgroundImage=e,r.id==="shift-layer1"?lastGradient1=e:lastGradient2=e),r.style.filter=` opacity(${t.currentOpacity}%) contrast(${t.currentContrast}%) brightness(${t.currentBrightness}%) saturate(${t.currentSaturation}%) hue-rotate(${t.currentHueShift}deg) `.trim()}function updateLayerState(r,t,i){r.transitionCurrentTime+=i,r.transitionProgress=Math.min(1,r.transitionProgress+i/r.transitionDuration);const n=()=>metaRecursiveEaseNoise(r.transitionProgress),{currentLayer:o}=getShiftLayerInfo(t),a=c=>Math.random()*c;o===1?(r.currentGradientSteps+=Math.round((r.targetGradientSteps-r.currentGradientSteps)*n()*5e-5*a(10))/10,r.currentHueShift+=Math.round((r.targetHueShift-r.currentHueShift)*n()*.05*a(10))/10):(r.currentGradientSteps+=Math.round((r.targetGradientSteps-r.currentGradientSteps)*n()*.05*a(10))/10,r.currentHueShift+=Math.round((r.targetHueShift-r.currentHueShift)*n()*.01*a(10))/10),r.currentContrast+=Math.round((r.targetContrast-r.currentContrast)*n()*a(1)*10)/10,r.currentBrightness+=Math.round((r.targetBrightness-r.currentBrightness)*n()*a(1)*10)/10,r.currentSaturation+=Math.round((r.targetSaturation-r.currentSaturation)*n()*a(1)*10)/10,r.currentOpacity+=Math.round((r.targetOpacity-r.currentOpacity)*n()*a(1)*10)/10,r.transitionCurrentTime>=r.transitionDuration&&(r.transitionCurrentTime=0,r.transitionProgress=0,r.transitionDuration=getRandomTransitionDuration(t),r.targetHueShift=getRandomHueShift(t),r.targetGradientSteps=getRandomGradientSteps(t),r.targetContrast=getRandomFilterValue(t),r.targetBrightness=getRandomFilterValue(t),r.targetSaturation=getRandomFilterValue(t),r.targetOpacity=getRandomOpacityValue(t))}function updateBgLayerState(r,t,i){r.transitionCurrentTime+=i,r.transitionProgress=Math.min(1,r.transitionProgress+i/r.transitionDuration*Math.random());const n=()=>metaRecursiveEaseNoise(r.transitionProgress);r.currentOpacity+=Math.round((r.targetOpacity-r.currentOpacity)*n()*Math.random()*1e3)/1e3,r.transitionCurrentTime>=r.transitionDuration&&(r.transitionCurrentTime=0,r.transitionProgress=0,r.transitionDuration=getRandomTransitionDuration(t),r.targetOpacity=t.id==="bg"?getRandomOpacityValue2(t):getRandomOpacityValue(t))}function updateColors(r){if(!isWindowActive){requestAnimationFrame(updateColors);return}const t=r-lastBGUpdateTime;lastBGUpdateTime=r,updateLayerState(shiftLayer1State,shiftLayer1,t),updateLayerState(shiftLayer2State,shiftLayer2,t),setGradient(shiftLayer1,shiftLayer1State),setGradient(shiftLayer2,shiftLayer2State),updateBgLayerState(bgState,bg,t),bg.style.opacity=bgState.currentOpacity,requestAnimationFrame(updateColors)}let shiftLayer1State,shiftLayer2State,bgState,lastBGUpdateTime;setTimeout(()=>{shiftLayer1State=createLayerState(shiftLayer1),shiftLayer2State=createLayerState(shiftLayer2),bgState=createBgLayerState(bg),lastBGUpdateTime=performance.now(),requestAnimationFrame(updateColors)},delayOtherResources);const hoverShift=document.querySelectorAll("button, a, .article-nav-bottom, footer"),alwaysShift=document.querySelectorAll("header, #site-title, #toolbar, nav .col a, .article-header, .article-title, .section-nav, footer");function getRandomHueRotation(){return Math.random()<.5?-45-Math.floor(Math.random()*270):45+Math.floor(Math.random()*270)}function getRandomInterval(){return 7e3+Math.floor(Math.random()*14e3)}function isElementInViewport(r){const n=r.getBoundingClientRect(),o=window.innerHeight||document.documentElement.clientHeight,a=window.innerWidth||document.documentElement.clientWidth,t=o*.8;return n.top>=-t&&n.left>=0&&n.bottom<=o+t&&n.right<=a}function startShift(r,n,o=!1){let a=getRandomHueRotation(),t=a,e=100,i=100,s=100,f=100,l=100,m=100,u=0,g=performance.now(),h=!0;function M(){const c=` hue-rotate(${a}deg) saturate(${e}%) contrast(${s}%) brightness(${l}%) ${o?"drop-shadow(0 0 1em rgba(255, 255, 255, 0.5))":""} `.trim();r.style.filter=c}function v(c){if(h){if(isWindowActive&&isElementInViewport(r)){const p=c-g;g=c,u+=p/n,u>=1&&(t=getRandomHueRotation(),i=Math.random()*35+90,f=Math.random()*(o?90:40)+80,m=Math.random()*(o?50:20)+(o?85:90),u=0);const d=()=>metaRecursiveEaseNoise(u);a+=Math.round((t-a)*d()*Math.random()*.07),e+=Math.round((i-e)*d()*Math.random()),s+=Math.round((f-s)*d()*Math.random()),l+=Math.round((m-l)*d()*Math.random()),M()}h&&requestAnimationFrame(v)}}return M(),requestAnimationFrame(v),()=>{h=!1,r.style.filter="none"}}function handleDisengage(r,n){n&&n(),r.style.filter="none"}setTimeout(()=>{const r={threshold:0,rootMargin:"200px"},n=new IntersectionObserver(t=>{t.forEach(e=>{const i=e.target;e.isIntersecting&&!i._isAnimating&&(i._stopper=startShift(i,getRandomInterval()),i._isAnimating=!0)})},r);let o=0;const a=15;alwaysShift.forEach((t,e)=>{setTimeout(()=>{n.observe(t)},o),e%a===a-1&&(o+=10)}),window.addEventListener("beforeunload",()=>{alwaysShift.forEach(t=>{t._stopper&&(t._stopper(),t._stopper=null)}),n.disconnect()}),isMobile||hoverShift.forEach(t=>{let e=null,i=null;const s=throttle(()=>{e&&e(),e=startShift(t,getRandomInterval(),!0)},30);t.addEventListener("mouseover",s),t.addEventListener("click",s),t.addEventListener("touchstart",()=>{e&&e(),e=startShift(t,getRandomInterval(),!0),i=setTimeout(()=>handleDisengage(t,e),888)}),t.addEventListener("mouseout",debounce(()=>handleDisengage(t,e),30))})},delayOtherResources2);
